(()=>{"use strict";var t,e={375:(t,e,s)=>{var i,a=s(260);!function(t){t.MENU="MenuScene",t.GAMEPLAY="GamePlayScene",t.INIT="InitScene",t.GAMEOVER="GameOverScene",t.LOADING="LoadingScene",t.SHOP="ShopScene",t.PAUSE="PauseScene",t.SETTING="SettingScene"}(i||(i={}));const h="New Athletic M54",n=["assets/coin/patterns/coinPattern0.txt","assets/coin/patterns/coinPattern1.txt","assets/coin/patterns/coinPattern2.txt","assets/coin/patterns/coinPattern3.txt","assets/coin/patterns/coinPattern4.txt","assets/coin/patterns/coinPattern5.txt"];var r,c,o,m,l,d;!function(t){t.BARRY_SPRITE_SHEET="assets/barry/spritesheet.png",t.BULLET_FLASH="assets/bullet/bullet-flash.png",t.EXPLOSION="assets/bullet/explosion-sprite.png",t.ORB_ANIM="assets/zap/orbAnim.png",t.GLOW="assets/zap/glow.png",t.ZAP_EFFECT="assets/zap/zapEffect.png",t.ZAP_SPRITE="assets/zap/spritesheet.png",t.COIN_SPRITE="assets/coin/coin-sprite.png",t.ALARM_LIGHT_EFFECT="assets/bg/Levels/Title/alarmGlow_TVOS.png",t.ROCKET="assets/missile/missile.png",t.ROCKET_ALERT="assets/missile/missileAlert.png",t.ROCKET_EFFECT="assets/missile/missileEffects.png",t.ROCKET_EXPLOSION="assets/missile/missileExplosion.png",t.WORKER_1_BODY="assets/workers/worker1Body.png",t.WORKER_1_HEAD="assets/workers/worker1Head.png",t.WORKER_2_BODY="assets/workers/worker2Body.png",t.WORKER_2_HEAD="assets/workers/worker2Head.png",t.WORKER_FAT_BODY="assets/workers/workerFatBody.png",t.DAN_SPRITE_SHEET="assets/dan/spritesheet.png"}(r||(r={})),function(t){t.BULLET="assets/bullet/1.png",t.COIN="assets/coin/1.png",t.BUTTON_BACKING="assets/UI/buttonBacking.png",t.TITLE="assets/bg/Levels/Title/Objects/title_small.png",t.TITLE_GLOW="assets/bg/Levels/Title/Objects/titleGlow_small.png",t.LOGO2="assets/logo2.jpg",t.START_ROOM_1="assets/bg/Levels/Title/start1.png",t.START_ROOM_2="assets/bg/Levels/Title/start2.png",t.START_ROOM="assets/bg/start.png",t.MID_ROOM="assets/bg/mid1.png",t.AQUA_ROOM="assets/bg/atlas/aquarium_assets.png",t.ALARM_LIGHT="assets/bg/Levels/Title/alarmLight_TVOS.png",t.BEST_SCREEN="assets/bg/Levels/Title/bestScreen.png",t.LIGHT="assets/bg/Levels/Title/title_light_TVOS.png",t.LIGHT_EFFECT_1="assets/bg/Levels/Title/lightEffect.png",t.LIGHT_EFFECT_2="assets/bg/Levels/Title/lightEffect2.png",t.TABLE="assets/bg/Levels/Title/table.png",t.RADIO="assets/bg/Levels/Title/radio.png",t.SMOKE="assets/bg/particles/smoke.png",t.DO_NOT_TOUCH="assets/bg/Levels/Title/doNotTouchSign_TVOS.png",t.SHOE="assets/equipment/shoe.png",t.GRAVITY_BELT="assets/equipment/gravity-belt.png",t.GRAVITY_SUIT="assets/equipment/gravity-suit.png",t.BARRY_DEAD="assets/barry/barry-dead.png",t.SHADOW="assets/barry/effect_shadow.png",t.TILESET="assets/tilemap/tiles/ground.png",t.TILESET_BG="assets/tilemap/tiles/bg.png"}(c||(c={})),function(t){t.COIN_COLLECT_1="assets/SFX/Coin/coin_pickup_1.mp3",t.COIN_COLLECT_2="assets/SFX/Coin/coin_pickup_2.mp3",t.COIN_COLLECT_3="assets/SFX/Coin/coin_pickup_3.mp3",t.MUSIC_GAMEPLAY="assets/music/Music_Level.mp3",t.MUSIC_MENU="assets/music/Music_Menu.mp3"}(o||(o={})),function(t){t.MAP_1="assets/tilemap/map1.json",t.MAP_2="assets/tilemap/map2.json",t.MAP_3="assets/tilemap/map3.json"}(m||(m={})),function(t){t[t.BACKGROUND_VERYLOW=0]="BACKGROUND_VERYLOW",t[t.BACKGROUND_LOW=1]="BACKGROUND_LOW",t[t.BACKGROUND_MEDIUM=2]="BACKGROUND_MEDIUM",t[t.BACKGROUND_HIGH=3]="BACKGROUND_HIGH",t[t.BACKGROUND_VERYHIGH=4]="BACKGROUND_VERYHIGH",t[t.OBJECT_VERYLOW=5]="OBJECT_VERYLOW",t[t.OBJECT_LOW=6]="OBJECT_LOW",t[t.OBJECT_MEDIUM=7]="OBJECT_MEDIUM",t[t.OBJECT_HIGH=8]="OBJECT_HIGH",t[t.OBJECT_VERYHIGH=9]="OBJECT_VERYHIGH"}(l||(l={}));class p{constructor(t,e,s,i,a,h="",n){i&&a&&(this.rectangle=t.add.nineslice(e,s,c.BUTTON_BACKING,void 0,i,a,10*t.cameras.main.width/3200,10*t.cameras.main.width/3200).setDisplaySize(i,a).setDepth(l.OBJECT_MEDIUM)),this.text=t.add.text(e,s,h,n).setOrigin(.5,.5).setStroke("#000000",3*t.cameras.main.width/3200).setDepth(l.OBJECT_MEDIUM),this.isPointerDown=!1,this.isPointerOver=!1,this.blackRect=t.add.rectangle(e,s,i,a,0,1*t.cameras.main.width/3200).setDisplaySize(i,a).setSize(i,a).setAlpha(0).setDepth(l.OBJECT_MEDIUM),this.rectangle.setInteractive()}setInteractive(){this.rectangle.on("pointerdown",(()=>this.handlePointerDown(this))),this.rectangle.on("pointerup",(()=>this.handlePointerUp(this))),this.rectangle.on("pointerover",(()=>this.handlePointerOver(this))),this.rectangle.on("pointerout",(()=>this.handlePointerOut(this)))}handlePointerDown(t){this.isPointerDown=!0,t.blackRect.setAlpha(.5)}handlePointerUp(t){this.isPointerDown=!1,t.blackRect.setAlpha(0)}handlePointerOver(t){this.isPointerOver=!0,t.blackRect.setAlpha(.5)}handlePointerOut(t){this.isPointerOver=!1,t.blackRect.setAlpha(0)}getIsPointerDown(){return this.isPointerDown}getIsPointerOver(){return this.isPointerOver}getRectangle(){return this.rectangle}getText(){return this.text}getBlackRect(){return this.blackRect}setIsPointerDown(t){this.isPointerDown=t}}class u extends a.Scene{constructor(){super({key:i.GAMEOVER})}init(t){this.score=t.score,this.coin=t.coin}preload(){}create(){this.add.rectangle(0,0,this.cameras.main.width,this.cameras.main.height,0).setOrigin(0,0).setAlpha(.5),this.add.rectangle(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,950*this.cameras.main.width/3200,1250*this.cameras.main.width/3200,9085376).setOrigin(.5,0),this.add.rectangle(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,930*this.cameras.main.width/3200,1240*this.cameras.main.width/3200,2370630).setOrigin(.5,0),this.add.rectangle(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,1e3*this.cameras.main.width/3200,100*this.cameras.main.width/3200,5726049),this.add.nineslice(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,c.BUTTON_BACKING,void 0,1e3*this.cameras.main.width/3200,50*this.cameras.main.width/3200),this.add.text(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,"RESULTS",{fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(2100*this.cameras.main.width/3200,275*this.cameras.main.width/3200,"DISTANCE",{fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(2100*this.cameras.main.width/3200,400*this.cameras.main.width/3200,`${Math.floor(this.score)}M`,{fontSize:125*this.cameras.main.width/3200,fontFamily:h,fontStyle:"bold",color:"#fef03b"}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(1700*this.cameras.main.width/3200,600*this.cameras.main.width/3200,"COLLECTED",{fontSize:60*this.cameras.main.width/3200,fontFamily:h,fontStyle:"bold"}).setOrigin(0,.5).setStroke("#000000",1),this.add.text(2450*this.cameras.main.width/3200,600*this.cameras.main.width/3200,`${this.coin}`,{fontSize:60*this.cameras.main.width/3200,fontFamily:h,color:"#fef03b",fontStyle:"bold"}).setOrigin(1,.5).setStroke("#000000",1),this.add.image(2500*this.cameras.main.width/3200,600*this.cameras.main.width/3200,c.COIN).setDisplaySize(60,60),this.playAgainBtn=new p(this,2100*this.cameras.main.width/3200,800*this.cameras.main.width/3200,650*this.cameras.main.width/3200,200*this.cameras.main.width/3200,"PLAY AGAIN",{color:"#ffffff",fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.playAgainBtn.setInteractive(),this.homeBtn=new p(this,2100*this.cameras.main.width/3200,1100*this.cameras.main.width/3200,650*this.cameras.main.width/3200,200*this.cameras.main.width/3200,"HOME",{color:"#ffffff",fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.homeBtn.setInteractive()}update(){this.homeBtn.getIsPointerDown()?(this.scene.stop(i.GAMEPLAY),this.scene.start(i.MENU)):this.playAgainBtn.getIsPointerDown()&&(this.scene.stop(i.GAMEPLAY),this.scene.start(i.GAMEPLAY))}}!function(t){t[t.MOVE=0]="MOVE",t[t.RUN=1]="RUN",t[t.DEAD=2]="DEAD"}(d||(d={}));class g{constructor(t,e,s,i=r.WORKER_2_HEAD,a=r.WORKER_2_BODY){this.scene=t,this.body=this.scene.matter.add.sprite(e,s+43*this.scene.cameras.main.width/3200,a,void 0).setDepth(l.OBJECT_MEDIUM).setScale(4*this.scene.cameras.main.width/3200).setFixedRotation().setCollisionGroup(-2).setOrigin(0,.3),this.head=this.scene.matter.add.sprite(e,s,i,void 0).setDepth(l.OBJECT_MEDIUM).setScale(4*this.scene.cameras.main.width/3200).setFixedRotation().setCollisionGroup(-2).setOrigin(0,.3),this.scene.anims.exists(a+"move")||this.scene.anims.create({key:a+"move",frames:this.body.anims.generateFrameNumbers(a,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"move")||this.scene.anims.create({key:i+"move",frames:this.head.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(a+"run")||this.scene.anims.create({key:a+"run",frames:this.body.anims.generateFrameNumbers(a,{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"run")||this.scene.anims.create({key:i+"run",frames:this.head.anims.generateFrameNumbers(i,{start:4,end:7}),frameRate:10,repeat:-1}),this.velocity=(Math.random()-.5)/2*this.scene.cameras.main.width/3200,this.velocity<0?this.velocity-=.1*this.scene.cameras.main.width/3200:this.velocity+=.1*this.scene.cameras.main.width/3200,this.state=d.MOVE,this.state==d.MOVE?(this.head.play(i+"move"),this.body.play(a+"move")):this.state==d.RUN&&(this.head.play(i+"run"),this.body.play(a+"run")),this.headKey=i,this.bodyKey=a,this.velocity<0?(this.body.setFlipX(!0),this.head.setFlipX(!0)):(this.body.setFlipX(!1),this.head.setFlipX(!1)),this.headTranslationX=0,this.headTranslationY=-43*this.scene.cameras.main.width/3200,this.shadow=t.add.sprite(e+200,s+200*this.scene.cameras.main.width/3200,c.SHADOW).setDepth(l.OBJECT_LOW).setScale(3*this.scene.cameras.main.width/3200).setAlpha(0)}update(t,e){var s,i;if(this.state==d.DEAD)return this.head.setTexture(this.headKey,13),void this.body.setTexture(this.bodyKey,13);this.state==d.MOVE?((null===(s=this.head.anims.currentAnim)||void 0===s?void 0:s.key)!=this.headKey+"move"&&(this.head.play(this.headKey+"move"),this.body.play(this.bodyKey+"move")),this.body.x+=this.velocity*t):this.state==d.RUN&&((null===(i=this.head.anims.currentAnim)||void 0===i?void 0:i.key)!=this.headKey+"run"&&(this.head.play(this.headKey+"run"),this.body.play(this.bodyKey+"run")),this.body.x+=this.velocity*t*1.5),this.head.x=this.body.x+this.headTranslationX,this.head.y=this.body.y+this.headTranslationY,Math.abs(e.x-this.body.x)<300&&(this.state=d.RUN),this.scene.matter.world.localWorld.gravity.y>0?(this.body.setFlipY(!1),this.head.setFlipY(!1),this.headTranslationX=0,this.headTranslationY=-43*this.scene.cameras.main.width/3200):(this.body.setFlipY(!0),this.head.setFlipY(!0),this.headTranslationX=0,this.headTranslationY=43*this.scene.cameras.main.width/3200),this.shadow.setPosition(this.body.x+50,this.shadow.y).setAlpha((this.body.y/this.scene.cameras.main.width*3200-320)/980).setScale(3*(this.body.y/this.scene.cameras.main.width*3200-320)/980*this.scene.cameras.main.width/3200).setVisible(this.body.visible)}handleCollider(t){if(this.state==d.DEAD)return;const e=t.getBullets();for(let t=0;t<e.length;t++)if(this.scene.matter.overlap(e[t],this.getBody())){this.state=d.DEAD;break}}getBody(){return[this.head,this.body]}setAll(t,e,s,i=r.WORKER_2_HEAD,a=r.WORKER_2_BODY){this.scene=t,this.body.x=e,this.head.x=e,this.body.y=s+43*this.scene.cameras.main.width/3200,this.head.y=s,this.headKey=i,this.bodyKey=a,this.head.setTexture(i),this.body.setTexture(a),this.scene.anims.exists(a+"move")||this.scene.anims.create({key:a+"move",frames:this.body.anims.generateFrameNumbers(a,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"move")||this.scene.anims.create({key:i+"move",frames:this.head.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(a+"run")||this.scene.anims.create({key:a+"run",frames:this.body.anims.generateFrameNumbers(a,{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"run")||this.scene.anims.create({key:i+"run",frames:this.head.anims.generateFrameNumbers(i,{start:4,end:7}),frameRate:10,repeat:-1}),this.velocity=(Math.random()-.5)/2*this.scene.cameras.main.width/3200,this.velocity<0?this.velocity-=.1*this.scene.cameras.main.width/3200:this.velocity+=.1*this.scene.cameras.main.width/3200,this.state=d.MOVE,this.velocity<0?(this.body.setFlipX(!0),this.head.setFlipX(!0)):(this.body.setFlipX(!1),this.head.setFlipX(!1))}maxX(){return this.body.x+this.body.width}minX(){return this.body.x}setVisible(t){return this.body.setVisible(t),this.head.setVisible(t),this}}class w extends Phaser.Physics.Matter.Sprite{constructor(t,e,s,i){super(t.matter.world,e,s,i),this.setDisplaySize(24*t.cameras.main.width/3200,62.4*t.cameras.main.height/1600).setDepth(l.OBJECT_LOW).setCollisionGroup(-2),t.add.existing(this),this.setAll(t,e,s,i)}setAll(t,e,s,i){if(this.setRotation(0).setFixedRotation().setPosition(e+Phaser.Math.Between(-15,15)*t.cameras.main.width/3200,s).setTexture(i),this.body){const e=Phaser.Math.Between(-5,15)*t.cameras.main.width/3200,s=30*t.cameras.main.height/1600;this.setVelocityY(s),this.setVelocityX(e),e>0?this.setRotation(Math.atan(s/e)-Math.PI/2):e<0&&this.setRotation(Math.atan(s/e)+Math.PI/2)}}}class y extends Phaser.GameObjects.Sprite{constructor(t,e,s,i){super(t,e,s,i),this.setDepth(l.OBJECT_MEDIUM).setDisplaySize(110*t.cameras.main.width/3200,92*t.cameras.main.height/1600),t.add.existing(this),this.scene.anims.exists("explosion")||this.scene.anims.create({key:"explosion",frames:this.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:40,repeat:1}),this.setAll(t,e,s,i)}setAll(t,e,s,i){this.setPosition(e,s+Phaser.Math.Between(-10,20)*t.cameras.main.height/1600).setTexture(i).setAlpha(1),t.add.existing(this),this.anims.play("explosion"),t.tweens.add({targets:this,alpha:0,duration:100})}}class f{}f.value=.5;class E{constructor(t,e,s,i=1){this.scene=t,this.coinPatternIdx=i,i>=n.length&&(i=0);const a=this.scene.cache.text.get(`pattern${i}`);let h=0,c=0;const m=70*t.cameras.main.height/1600,d=this.scene.add.sprite(-20,-20,r.COIN_SPRITE);this.scene.anims.exists("turn")||this.scene.anims.create({key:"turn",frames:d.anims.generateFrameNumbers(r.COIN_SPRITE,{start:0,end:7}),frameRate:10,repeat:-1}),this.coins=[],this.minX=e,this.maxX=e,this.minY=s,this.maxY=s;for(let i=0;i<a.length;i++)"\n"!=a[i]?("1"==a[i]&&(this.coins.push(this.scene.matter.add.sprite(e+c*m,s+h*m,r.COIN_SPRITE,0,{isStatic:!0}).setDisplaySize(50*t.cameras.main.width/3200,50*t.cameras.main.height/1600).play("turn").setCollisionGroup(-2).setDepth(l.OBJECT_LOW)),this.minX=Math.min(this.minX,e+c*m),this.maxX=Math.max(this.maxX,e+c*m),this.minY=Math.min(this.minY,s+h*m),this.maxY=Math.max(this.maxY,s+h*m)),c++):(h++,c=0);E.sound1||(E.sound1=this.scene.sound.add(o.COIN_COLLECT_1)),E.sound2||(E.sound2=this.scene.sound.add(o.COIN_COLLECT_2)),E.sound3||(E.sound3=this.scene.sound.add(o.COIN_COLLECT_3)),E.sound1.stop(),E.sound2.stop(),E.sound3.stop()}handleColliderWithPlayer(t,e){const s=100;if(!(t.x-s>this.maxX+this.coins[0].width/2||t.x+s<this.minX-this.coins[0].width/2||t.y+s<this.minY-this.coins[0].height/2||t.y-s>this.maxY+this.coins[0].height/2))for(let s=0;s<this.coins.length;s++)this.scene.matter.overlap(t,[this.coins[s]])&&this.coins[s].visible&&(this.coins[s].setVisible(!1),e.addCoin(),E.playSound())}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}setVisible(t){if(this.coins[0].visible==t)return this;for(let e=0;e<this.coins.length;e++)this.coins[e].setVisible(t);return this}setAll(t,e,s){this.scene=t;const i=this.scene.cache.text.get(`pattern${this.coinPatternIdx}`);let a=0,h=0;const n=70*t.cameras.main.height/1600;this.minX=e,this.maxX=e,this.minY=s,this.maxY=s;let r=0;for(let t=0;t<i.length;t++)"\n"!=i[t]?("1"==i[t]&&(this.coins[r++].setPosition(e+h*n,s+a*n).play("turn").setCollisionGroup(-2).setVisible(!0),this.minX=Math.min(this.minX,e+h*n),this.maxX=Math.max(this.maxX,e+h*n),this.minY=Math.min(this.minY,s+a*n),this.maxY=Math.max(this.maxY,s+a*n)),h++):(a++,h=0);return this}static playSound(){E.sound1.setVolume(f.value),E.sound1.play()}}class S{constructor(t){this.scene=t}update(t){}reset(t){}maxX(){return 0}maxY(){return 0}minX(){return 0}minY(){return 0}getBody(){return[this.rect]}}class O extends S{constructor(t,e,s){super(t),this.rect=this.scene.matter.add.sprite(e,s,r.ROCKET,void 0,{isStatic:!0}).setScale(3*t.cameras.main.height/1600).setRectangle(85*t.cameras.main.width/3200,50*t.cameras.main.height/1600).setStatic(!0).setDepth(l.OBJECT_MEDIUM).setCollisionGroup(-2),this.scene.anims.exists("rocket-turn")||this.scene.anims.create({key:"rocket-turn",frames:this.rect.anims.generateFrameNumbers(r.ROCKET,{start:0,end:3}),frameRate:10,repeat:-1}),this.rect.anims.play("rocket-turn"),this.fire=this.scene.matter.add.sprite(e+80*t.cameras.main.width/3200,s,r.ROCKET_EFFECT,void 0,{isStatic:!0}).setDepth(l.OBJECT_MEDIUM).setScale(2*t.cameras.main.height/1600).setRectangle(85*t.cameras.main.width/3200,50*t.cameras.main.height/1600).setStatic(!0).setCollisionGroup(-2),this.scene.anims.exists("rocket-fire")||this.scene.anims.create({key:"rocket-fire",frames:this.rect.anims.generateFrameNumbers(r.ROCKET_EFFECT,{start:0,end:3}),frameRate:10,repeat:-1}),this.fire.anims.play("rocket-fire"),this.alert=this.scene.add.sprite(e,s,r.ROCKET_ALERT).setDepth(l.OBJECT_MEDIUM).setScale(2.5*t.cameras.main.width/3200),this.scene.anims.exists("alert")||this.scene.anims.create({key:"alert",frames:this.alert.anims.generateFrameNumbers(r.ROCKET_ALERT,{start:0,end:7}),frameRate:5,repeat:0}),this.speed=Phaser.Math.Between(10,20)*t.cameras.main.width/3200,this.moveY=Phaser.Math.Between(1,9)*t.cameras.main.width/3200,this.isWaiting=!1}update(t,e=void 0){if(this.isWaiting&&this.alert.anims.isPlaying){const t=this.moveY;e&&(Math.abs(e.y-this.alert.y)<t&&(this.alert.y=e.y),e.y>this.alert.y?this.alert.y+=t:e.y<this.alert.y&&(this.alert.y-=t)),this.alert.x=this.scene.cameras.main.scrollX+3150*this.scene.cameras.main.width/3200,this.rect.y=this.fire.y=this.alert.y,this.rect.x=this.alert.x+100*this.scene.cameras.main.width/3200,this.fire.x=this.alert.x+180*this.scene.cameras.main.width/3200}this.isWaiting&&!this.alert.anims.isPlaying&&(this.rect.visible||(this.rect.setVisible(!0),this.fire.setVisible(!0),this.alert.setVisible(!1)),this.rect.x-=this.speed,this.fire.x-=this.speed)}reset(t){this.rect.x=t+100*this.scene.cameras.main.width/3200,this.fire.x=t+180*this.scene.cameras.main.width/3200,this.alert.x=t;const e=Phaser.Math.Between(400,600)*this.scene.cameras.main.height/1600;this.rect.y=e,this.fire.y=e,this.alert.y=e,this.isWaiting=!1,this.speed=Phaser.Math.Between(10,20)*this.scene.cameras.main.width/3200,this.moveY=Phaser.Math.Between(1,9)*this.scene.cameras.main.width/3200,this.rect.setVisible(!1),this.fire.setVisible(!1),this.alert.setVisible(!0)}maxX(){return this.fire.x+this.fire.width}maxY(){return this.fire.y+this.fire.height}minX(){return this.rect.x}minY(){return this.rect.y}getBody(){return[this.rect,this.fire]}startAlert(){this.alert.play("alert"),this.isWaiting=!0}setAll(t,e,s){this.scene=t,this.rect.x=e+100*t.cameras.main.width/3200,this.fire.x=e+180*t.cameras.main.width/3200,this.alert.x=e,this.rect.y=s,this.fire.y=s,this.alert.y=s,this.speed=Phaser.Math.Between(10,20)*t.cameras.main.width/3200,this.moveY=Phaser.Math.Between(1,9)*t.cameras.main.width/3200,this.isWaiting=!1,this.rect.setVisible(!1),this.fire.setVisible(!1),this.alert.setVisible(!0)}setVisible(t){return this.rect.setVisible(t),this.fire.setVisible(t),this.alert.setVisible(t),this}}class _ extends S{constructor(t,e,s,i,a){super(t),this.sprite1=t.matter.add.sprite(e,s,r.ORB_ANIM,0,{isStatic:!0}).setCircle(30*t.cameras.main.width/3200).setDisplaySize(124*t.cameras.main.width/3200,84*t.cameras.main.width/3200).setStatic(!0).setDepth(l.OBJECT_HIGH).setCollisionGroup(-2),this.sprite1.anims.create({key:"turn1",frames:this.sprite1.anims.generateFrameNumbers(r.ORB_ANIM,{start:0,end:2}),frameRate:10,repeat:-1}),this.sprite2=t.matter.add.sprite(i,a,r.ORB_ANIM,0,{isStatic:!0}).setCircle(30*t.cameras.main.width/3200).setDisplaySize(124*t.cameras.main.width/3200,84*t.cameras.main.width/3200).setStatic(!0).setDepth(l.OBJECT_HIGH).setCollisionGroup(-2),this.spinChance=.1,this.hardChance=.1,this.sprite2.anims.create({key:"turn2",frames:this.sprite2.anims.generateFrameNumbers(r.ORB_ANIM,{start:0,end:2}),frameRate:10,repeat:-1}),this.glow1=t.add.sprite(e,s,r.GLOW,0).setDepth(l.BACKGROUND_MEDIUM).setDisplaySize(230*t.cameras.main.width/3200,230*t.cameras.main.width/3200),this.glow1.anims.create({key:"bloom1",frames:this.glow1.anims.generateFrameNumbers(r.GLOW,{start:0,end:15}),frameRate:10,repeat:-1}),this.glow2=t.add.sprite(i,a,r.GLOW,0).setDepth(l.BACKGROUND_MEDIUM).setDisplaySize(230*t.cameras.main.width/3200,230*t.cameras.main.width/3200),this.glow2.anims.create({key:"bloom2",frames:this.glow2.anims.generateFrameNumbers(r.GLOW,{start:0,end:15}),frameRate:10,repeat:-1}),this.rect=t.matter.add.sprite((e+i)/2,(s+a)/2,r.ZAP_EFFECT,0,{isStatic:!0}).setOrigin(.5,.5).setDepth(l.OBJECT_LOW).setRotation(0).setCollisionGroup(-2),this.rect.anims.create({key:"electric",frames:this.rect.anims.generateFrameNumbers(r.ZAP_EFFECT,{start:0,end:3}),frameRate:10,repeat:-1}),this.sprite1.anims.play("turn1"),this.sprite2.anims.play("turn2"),this.glow1.anims.play("bloom1"),this.glow2.anims.play("bloom2"),this.rect.play("electric")}update(t){if(this.sprite1.x>this.sprite2.x){let t=this.sprite1.x;this.sprite1.x=this.sprite2.x,this.sprite2.x=t,t=this.sprite1.y,this.sprite1.y=this.sprite2.y,this.sprite2.y=t}if(this.isSpin){let e=(this.sprite1.x+this.sprite2.x)/2,s=(this.sprite1.y+this.sprite2.y)/2,i=this.sprite1.x,a=this.sprite1.y,h=this.sprite2.x,n=this.sprite2.y;const r=1e-4;this.sprite1.x=e+(i-e)*Math.cos(t*r*Math.PI)-(a-s)*Math.sin(t*r*Math.PI),this.sprite1.y=s+(i-e)*Math.sin(t*r*Math.PI)+(a-s)*Math.cos(t*r*Math.PI),this.sprite2.x=e+(h-e)*Math.cos(t*r*Math.PI)-(n-s)*Math.sin(t*r*Math.PI),this.sprite2.y=s+(h-e)*Math.sin(t*r*Math.PI)+(n-s)*Math.cos(t*r*Math.PI),e=(this.sprite1.x+this.sprite2.x)/2,s=(this.sprite1.y+this.sprite2.y)/2,i=this.sprite1.x,a=this.sprite1.y,h=this.sprite2.x,n=this.sprite2.y,h==i&&(h+=1e-11),this.sprite1.setRotation(Math.PI/2+Math.atan((n-a)/(h-i))),this.sprite2.setRotation(-Math.PI/2+Math.atan((n-a)/(h-i))),this.glow1.setRotation(Math.PI/2+Math.atan((n-a)/(h-i))),this.glow2.setRotation(-Math.PI/2+Math.atan((n-a)/(h-i)))}this.updateRect(),this.updateGlow();const e=this.scene;this.evaluateSpinChance(e.score.getScore())}updateGlow(){this.glow1.x=this.sprite1.x,this.glow1.y=this.sprite1.y,this.glow2.x=this.sprite2.x,this.glow2.y=this.sprite2.y}updateRect(){this.rect.x=(this.sprite1.x+this.sprite2.x)/2,this.rect.y=(this.sprite1.y+this.sprite2.y)/2,this.rect.setRotation(0);let t=0;0==Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))&&(t=1e-4),this.rect.setDisplaySize(Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))+t,100*this.scene.cameras.main.width/3200).setRectangle(Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))+t,50*this.scene.cameras.main.width/3200).setCollisionGroup(-2),t=0,this.sprite2.x-this.sprite1.x==0&&(t=1e-4),this.rect.setRotation(Math.atan((this.sprite2.y-this.sprite1.y)/(this.sprite2.x-this.sprite1.x+t)))}reset(t){const e=t+Phaser.Math.Between(0,300)*this.scene.cameras.main.width/3200,s=e+Phaser.Math.Between(200,500)*this.scene.cameras.main.width/3200,i=Phaser.Math.Between(650,1e3)*this.scene.cameras.main.width/3200;let a=Phaser.Math.Between(650,1e3)*this.scene.cameras.main.width/3200;const h=Math.random();h<this.hardChance?a=1250*this.scene.cameras.main.width/3200:h<2*this.hardChance&&(a=300*this.scene.cameras.main.width/3200),this.sprite1.setRotation(Math.PI/2+Math.atan((a-i)/(s-e))),this.sprite2.setRotation(-Math.PI/2+Math.atan((a-i)/(s-e))),this.setAll(this.scene,e,i,s,a),10==Phaser.Math.Between(0,10)?this.isSpin=!0:this.isSpin=!1}maxX(){return this.sprite2.x>this.sprite1.x?this.sprite2.x:this.sprite1.x}minX(){return this.sprite2.x<this.sprite1.x?this.sprite2.x:this.sprite1.x}maxY(){return this.sprite2.y>this.sprite1.y?this.sprite2.y:this.sprite1.y}minY(){return this.sprite2.y<this.sprite1.y?this.sprite2.y:this.sprite1.y}getBody(){return[this.sprite1,this.sprite2,this.rect]}setAll(t,e,s,i,a){if(e>i){let t=e;e=i,i=t,t=s,s=a,a=t}this.sprite1.x=e,this.sprite2.x=i,this.sprite1.y=s,this.sprite2.y=a,this.updateRect(),this.updateGlow(),Math.random()<this.spinChance?this.isSpin=!0:this.isSpin=!1}evaluateSpinChance(t){this.spinChance=Math.log10(.5*t/123+1)/3,this.spinChance>.6&&(this.spinChance=.6),this.hardChance=Math.log10(.5*t/123+1)/6,this.hardChance>.3&&(this.hardChance=.3)}setVisible(t){return this.sprite1.visible==t||(this.sprite1.setVisible(t),this.sprite2.setVisible(t),this.glow1.setVisible(t),this.glow2.setVisible(t),this.rect.setVisible(t)),this}}class T{static init(t){T.clear();for(let e=0;e<0;e++)T.removeBullet(new w(t,100,100,c.BULLET)),T.removeExplosion(new y(t,100,100,r.EXPLOSION)),T.removeZap(new _(t,-100,-100,-100,-100)),T.removeRocket(new O(t,-100,-100));const e=[];for(let t=0;t<n.length;t++)e.push(t);for(let s=0;s<n.length;s++){const i=new E(t,110,110,e[s]).setVisible(!1);T.coins.push(i)}}static getBullet(t,e,s,i){if(T.bullets.length>0){const a=T.bullets.pop();return a.setVisible(!0).setAll(t,e,s,i),a}return T.count++,new w(t,e,s,i)}static removeBullet(t){t.setVisible(!1),T.bullets.push(t)}static getExplosion(t,e,s,i){if(T.explosions.length>0){const a=T.explosions.pop();return a.setVisible(!0).setAll(t,e,s,i),a}return T.count++,new y(t,e,s,i)}static removeExplosion(t){t.setVisible(!1),T.explosions.push(t)}static getZap(t,e,s,i,a){if(T.zaps.length>0){const h=T.zaps.pop();return h.setAll(t,e,s,i,a),h.setVisible(!0),h}return T.count++,new _(t,e,s,i,a)}static removeZap(t){t.setVisible(!1),T.zaps.push(t)}static removeObstacle(t){t instanceof _&&T.removeZap(t)}static clear(){T.bullets=[],T.explosions=[],T.count=0,T.rockets=[],T.zaps=[],T.coins=[],T.workers=[]}static getCoin(t,e,s){if(T.coins.length>0){const i=T.coins.pop();return i.setAll(t,e,s),i}return T.count++,new E(t,e,s,0)}static removeCoin(t){T.coins.push(t)}static getRocket(t,e,s){if(T.rockets.length>0){const i=T.rockets.pop();return i.setAll(t,e,s),i.setVisible(!0),i}return T.count++,new O(t,e,s)}static removeRocket(t){t.setVisible(!1),T.rockets.push(t)}static getWorker(t,e,s){let i=r.WORKER_1_HEAD,a=r.WORKER_1_BODY;switch(i=Phaser.Math.Between(0,1)%2?r.WORKER_1_HEAD:r.WORKER_2_HEAD,Phaser.Math.Between(0,2)){case 0:a=r.WORKER_1_BODY;break;case 1:a=r.WORKER_2_BODY;break;case 2:a=r.WORKER_FAT_BODY}if(T.workers.length>0){const h=T.workers.pop();return h.setAll(t,e,s,i,a),h.setVisible(!0),h}return T.count++,new g(t,e,s,i,a)}static removeWorker(t){T.workers.push(t),t.setVisible(!1)}}T.bullets=[],T.explosions=[],T.zaps=[],T.count=0,T.coins=[],T.rockets=[],T.workers=[];const b=[r.DAN_SPRITE_SHEET],x=["Dan"],I=[9999],v=["Dan the mannn!"],R=[c.SHOE,c.GRAVITY_BELT,r.WORKER_1_HEAD,c.GRAVITY_SUIT],B=["Shoe","Gravity Belt","AntiWorker","Gravity Suit"],M=[3e3,5999,1e3,99999],P=["run faster at start","Fall faster","No Worker, no dead","Reverse Gravity"];var D;!function(t){t.EQUIPPED="equiped",t.NOT_EQUIPPED="not_equipped",t.HAVE_NOT_BOUGHT_YET=""}(D||(D={}));class C{static init(){if(C.isInit)return;C.isInit=!0;let t=0;for(t=0;t<R.length;t++){const e=localStorage.getItem("product-"+String(t));"equiped"==e?C.productState.push(D.EQUIPPED):"not_equipped"==e?C.productState.push(D.NOT_EQUIPPED):C.productState.push(D.HAVE_NOT_BOUGHT_YET),C.productName.push(B[t]),C.productPrice.push(M[t])}for(;t-R.length<b.length;t++){const e=localStorage.getItem("product-"+String(t));"equiped"==e?C.productState.push(D.EQUIPPED):"not_equipped"==e?C.productState.push(D.NOT_EQUIPPED):C.productState.push(D.HAVE_NOT_BOUGHT_YET),C.productName.push(x[t-R.length]),C.productPrice.push(I[t-R.length])}localStorage.getItem("allCoin")?this.allCoin=Number(localStorage.getItem("allCoin")):this.allCoin=0,C.numProduct=C.productState.length}static getProductState(t){return C.isInit||C.init(),t>=C.productState.length?D.HAVE_NOT_BOUGHT_YET:C.productState[t]}static canBuyProduct(t){return C.isInit||C.init(),C.productState[t]==D.HAVE_NOT_BOUGHT_YET&&C.allCoin>=this.productPrice[t]}static buy(t,e){C.isInit||C.init(),C.productState[t]==D.HAVE_NOT_BOUGHT_YET&&(C.productState[t]=D.NOT_EQUIPPED,C.allCoin-=e,localStorage.setItem("product-"+String(t),"not_equipped"),C.saveCoin())}static equip(t){C.isInit||C.init(),C.productState[t]==D.NOT_EQUIPPED&&(C.productState[t]=D.EQUIPPED,localStorage.setItem("product-"+String(t),"equiped"))}static unequip(t){C.isInit||C.init(),C.productState[t]==D.EQUIPPED&&(C.productState[t]=D.NOT_EQUIPPED,localStorage.setItem("product-"+String(t),"not_equipped"))}static getAllCoin(){return C.isInit||C.init(),C.allCoin}static addCoin(t){C.isInit||C.init(),C.allCoin+=t,localStorage.setItem("allCoin",`${C.allCoin}`)}static saveCoin(){localStorage.setItem("allCoin",`${C.allCoin}`)}static getNumProduct(){return C.numProduct}static getProductName(t){return C.isInit||C.init(),t>=C.productName.length?"":C.productName[t]}}C.isInit=!1,C.allCoin=0,C.productName=[],C.productState=[],C.productPrice=[],C.numProduct=0;class k{constructor(t){this.player=t}init(){}update(t){}flying(){}falling(){}moving(){}remove(){}}class A extends k{constructor(t){super(t),this.gravity_effect=this.player.scene.add.sprite(1e3*this.player.scene.cameras.main.height/1600,1e3*this.player.scene.cameras.main.height/1600,r.ROCKET_EFFECT,5).setDepth(l.OBJECT_MEDIUM).setScale(3.5*this.player.scene.cameras.main.height/1600).setAngle(-90).setVisible(!1),this.player.scene.anims.exists("gravity_effect")||this.player.scene.anims.create({key:"gravity_effect",frames:this.gravity_effect.anims.generateFrameNumbers(r.ROCKET_EFFECT,{start:4,end:7}),frameRate:10,repeat:-1}),this.gravity_effect.play("gravity_effect"),this.transitionX=-10,this.transitionY=20}init(){const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,2.5*t),this.player.setJumpVelo(1.5*U)}update(t){this.gravity_effect.setPosition(this.player.x+this.transitionX,this.player.y+this.transitionY),this.player.playerState==V.FALLING&&this.player.visible?this.gravity_effect.setVisible(!0):this.gravity_effect.setVisible(!1);const e=this.player.scene.matter.world.localWorld.gravity.y<0;this.gravity_effect.flipX!=e&&(this.player.scene.anims.remove("gravity_effect"),this.gravity_effect.setFlipX(e),this.player.scene.anims.create({key:"gravity_effect",frames:this.gravity_effect.anims.generateFrameNumbers(r.ROCKET_EFFECT,{start:4,end:7}),frameRate:10,repeat:-1}),this.gravity_effect.play("gravity_effect"),e?(this.transitionX=-15,this.transitionY=-20):(this.transitionX=-15,this.transitionY=20))}remove(){const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,t/2),this.player.setJumpVelo(U)}}class N extends k{constructor(t){super(t)}init(){this.player.setDefaultSpeed(1.5*this.player.getDefaultSpeed())}remove(){this.player.setDefaultSpeed(this.player.getDefaultSpeed())}}class F extends k{init(){this.player.scene.workerManager.setNumWorker(0)}remove(){this.player.scene.workerManager.setNumWorker(10)}}class L extends k{constructor(t){super(t)}init(){const t=r.DAN_SPRITE_SHEET;this.player.texture.key=r.DAN_SPRITE_SHEET,this.player.scene.anims.remove("move"),this.player.scene.anims.remove("fly"),this.player.scene.anims.remove("fall"),this.player.scene.anims.create({key:"move",frames:this.player.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fly",frames:this.player.anims.generateFrameNumbers(t,{start:2,end:2}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fall",frames:this.player.anims.generateFrameNumbers(t,{start:3,end:3}),frameRate:10,repeat:-1}),this.player.play("move")}remove(){const t=r.BARRY_SPRITE_SHEET;this.player.texture.key=t,this.player.scene.anims.remove("move"),this.player.scene.anims.remove("fly"),this.player.scene.anims.remove("fall"),this.player.scene.anims.create({key:"move",frames:this.player.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fly",frames:this.player.anims.generateFrameNumbers(t,{start:2,end:2}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fall",frames:this.player.anims.generateFrameNumbers(t,{start:3,end:3}),frameRate:10,repeat:-1}),this.player.play("move")}}class G extends k{constructor(t){super(t),this.count=0,this.flyFlag=!1}init(){this.player.canFireBullet=!1}update(t){}remove(){const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,Math.abs(t)),this.player.setJumpVelo(U)}flying(){this.flyFlag=!0}falling(){if(this.flyFlag){this.count++;const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,-t),-t>0?this.player.setFlipY(!1):this.player.setFlipY(!0),this.player.setJumpVelo(0),this.flyFlag=!1}}}const U=-8;var V;!function(t){t.FLYING="Fly",t.FALLING="Fall",t.MOVING="Move",t.DEAD="Dead"}(V||(V={}));class H extends a.Physics.Matter.Sprite{constructor(t,e,s,i){super(t.matter.world,e,s,i),this.jumpVelo=U,this.setDisplaySize(140*t.cameras.main.width/3200,160*t.cameras.main.width/3200).setRectangle(80*t.cameras.main.width/3200,150*t.cameras.main.width/3200).setFixedRotation().setCollisionGroup(-2).setDepth(l.OBJECT_VERYHIGH).setOrigin(.65,.5),this.initBullet(),this.equipments=[],this.playerState=V.MOVING,this.scene.add.existing(this),this.createAnims(i),this.defaultSpeed=.5*this.scene.cameras.main.width/3200,this.speed=this.defaultSpeed,this.canFireBullet=!0,this.jumpVelo=U*this.scene.cameras.main.width/3200,this.shadow=t.add.sprite(e,s+200*t.cameras.main.width/3200,c.SHADOW).setDepth(l.OBJECT_MEDIUM).setScale(3).setAlpha(0)}createAnims(t){this.scene.anims.exists("move")&&this.scene.anims.remove("move"),this.scene.anims.create({key:"move",frames:this.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:10,repeat:-1}),this.scene.anims.exists("fly")&&this.scene.anims.remove("fly"),this.scene.anims.create({key:"fly",frames:this.anims.generateFrameNumbers(t,{start:3,end:3}),frameRate:10,repeat:1}),this.scene.anims.exists("fall")&&this.scene.anims.remove("fall"),this.scene.anims.create({key:"fall",frames:this.anims.generateFrameNumbers(t,{start:2,end:2}),frameRate:10,repeat:1}),this.scene.anims.exists("flash")||this.scene.anims.create({key:"flash",frames:this.bulletFlash.anims.generateFrameNumbers(r.BULLET_FLASH,{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.play("move"),this.bulletFlash.play("flash")}initBullet(){this.bullets=[],this.explosions=[],this.delayFire=2,this.bulletFlash=this.scene.add.sprite(0,0,r.BULLET_FLASH).setDisplaySize(150*this.scene.cameras.main.width/3200,150*this.scene.cameras.main.width/3200).setDepth(l.OBJECT_HIGH)}loadUserData(){for(let t=0;t<C.getNumProduct();t++)if(C.getProductState(t)==D.EQUIPPED)switch(C.getProductName(t)){case"Gravity Belt":this.addEquipment(new A(this));break;case"Shoe":this.addEquipment(new N(this));break;case"AntiWorker":this.addEquipment(new F(this));break;case"Dan":this.addEquipment(new L(this));break;case"Gravity Suit":this.addEquipment(new G(this))}}update(t){super.update();const e=this.scene;switch(this.x+=t*this.speed,this.playerState){case V.MOVING:e.matter.overlap(this,[e.ground,e.ground2])||this.falling();break;case V.FLYING:break;case V.FALLING:e.matter.overlap(this,[e.ground,e.ground2])?this.moving():this.falling();break;case V.DEAD:this.bulletFlash.setVisible(!1)}this.updateBullet(t),this.shadow.setPosition(this.x-10,this.shadow.y).setAlpha((this.y-320)/980).setScale(3*(this.y-320)/980).setVisible(this.visible);for(let e=0;e<this.equipments.length;e++)this.equipments[e].update(t)}updateBullet(t){const e=this.scene;for(let s=0;s<this.getBullets().length;s++)this.bullets[s].update(t),e.matter.overlap(this.bullets[s],[e.ground])&&(this.explosions.push(T.getExplosion(this.scene,this.bullets[s].x,this.bullets[s].y,r.EXPLOSION)),T.removeBullet(this.bullets[s]),this.bullets.splice(s,1),s--);let s=0;for(let t=0;t<this.explosions.length&&0==this.explosions[t].alpha;t++)T.removeExplosion(this.explosions[t]),s++;s>0&&this.explosions.splice(0,s),this.bulletFlash.setPosition(this.x-11*this.scene.cameras.main.width/3200,this.y+135*this.scene.cameras.main.width/3200)}fireBullet(){this.delayFire+=.5,this.delayFire>=2&&(this.bullets.push(T.getBullet(this.scene,this.x-10*this.scene.cameras.main.width/3200,this.y+95*this.scene.cameras.main.width/3200,c.BULLET)),this.delayFire-=2)}flying(){this.canFireBullet&&(this.getVelocity()&&(this.getVelocity()&&this.getVelocity().y>this.jumpVelo?this.setVelocityY(Number(this.getVelocity().y)+this.jumpVelo/20):this.setVelocityY(this.jumpVelo)),this.fireBullet(),this.bulletFlash.setVisible(!0)),this.playerState=V.FLYING,this.anims.play("fly");for(let t=0;t<this.equipments.length;t++)this.equipments[t].flying()}falling(){const t=this.scene;t.matter.overlap(this,[t.ground,t.ground2])||(this.playerState=V.FALLING,this.anims.play("fall"),this.bulletFlash.setVisible(!1));for(let t=0;t<this.equipments.length;t++)this.equipments[t].falling()}moving(){this.anims.play("move"),this.playerState=V.MOVING}getBullets(){return this.bullets}getSpeed(){return this.speed}setSpeed(t){this.speed=t}setJumpVelo(t){this.jumpVelo=t}getJumpVelo(){return this.jumpVelo}addEquipment(t){t.init(),this.equipments.push(t)}getEquipments(){return this.equipments}removeEquipment(t){for(let e=0;e<this.equipments.length;e++)if(this.equipments[e]instanceof t){this.equipments[e].remove(),this.equipments.splice(e,1);break}}getDefaultSpeed(){return this.defaultSpeed}setDefaultSpeed(t){this.defaultSpeed=t}getBulletFlash(){return this.bulletFlash}}class Y extends Phaser.GameObjects.Text{constructor(t){super(t,100,60,"0",{}),this.scene.add.existing(this),this.setFontSize("80px"),this.setColor("#ffffff"),this.setFontFamily(h),this.setStroke("#000000",5*t.cameras.main.width/3200),this.setDepth(l.OBJECT_VERYLOW),this.score=0,localStorage.getItem("highscore")?this.highScore=Number(localStorage.getItem("highscore")):this.highScore=0,this.level=100}add(t,e=1){this.score+=t*e,this.highScore<this.score&&(this.highScore=this.score),this.setNewScore()}setNewScore(){this.setText(`${Math.floor(this.score)}`),this.x=this.scene.cameras.main.scrollX+150}resetScore(){this.score=0,this.setNewScore()}getLevel(){return this.level}setLevel(t){this.level=t}getScore(){return this.score}saveHighScore(){localStorage.setItem("highscore",`${this.highScore}`)}}class W{constructor(t,e){this.scene=t,this.rockets=[],this.minDistance=3500*t.cameras.main.width/3200,this.rocketIdx=[];let s=Phaser.Math.Between(this.minDistance,2*this.minDistance);for(let t=0;t<e;t++)this.rocketIdx.push(s),s+=Phaser.Math.Between(this.minDistance,2*this.minDistance)}checkCollider(t){for(let e=0;e<this.rockets.length;e++)if(this.scene.matter.overlap(t,this.rockets[e].getBody()))return!0;return!1}update(t,e){if(this.rocketIdx[0]<this.scene.cameras.main.scrollX+3200){let t=0;const e=[0,50,20,10,10,10],s=Phaser.Math.Between(1,100);let i=0;for(let a=0;a<e.length;a++)if(i+=e[a],s<=i){t=a;break}for(let e=0;e<t;e++){const t=T.getRocket(this.scene,0,0);t.reset(this.rocketIdx[0]),t.startAlert(),this.rockets.push(t)}this.rocketIdx.splice(0,1),this.rocketIdx.push(this.rocketIdx[this.rocketIdx.length-1]+Phaser.Math.Between(this.minDistance,2*this.minDistance))}let s=0;for(let i=0;i<this.rockets.length;i++)this.rockets[i].update(t,e),this.rockets[i].maxX()<this.scene.cameras.main.scrollX&&s++;if(s==this.rockets.length){for(let t=0;t<this.rockets.length;t++)T.removeRocket(this.rockets[t]);this.rockets=[]}const i=this.scene;this.evaluateMinDistance(i.score.getScore())}evaluateMinDistance(t,e=4500){this.minDistance=e-1300*Math.log10(.5*t/923+1)*this.scene.cameras.main.width/3200,this.minDistance<e-2e3&&(this.minDistance=(e-2e3)*this.scene.cameras.main.width/3200)}}class K{constructor(t,e){this.scene=t,this.workers=[];let s=4e3*this.scene.cameras.main.width/3200;for(let i=0;i<e;i++)this.workers.push(T.getWorker(t,s,1250*this.scene.cameras.main.width/3200).setVisible(!1)),s+=Phaser.Math.Between(100,1e3)*this.scene.cameras.main.width/3200}update(t,e){let s=0;for(let i=0;i<this.workers.length;i++)this.workers[i].minX()<this.scene.cameras.main.scrollX+this.scene.cameras.main.width&&this.workers[i].setVisible(!0),this.workers[i].update(t,e),this.workers[i].maxX()<this.scene.cameras.main.scrollX&&(s++,this.workers[i].setVisible(!1));if(s==this.workers.length){for(let t=0;t<s;t++)T.removeWorker(this.workers[t]);this.workers=[];let t=this.scene.cameras.main.scrollX+this.scene.cameras.main.width+Phaser.Math.Between(100,1e3)*this.scene.cameras.main.width/3200;for(let e=0;e<s;e++)this.workers.push(T.getWorker(this.scene,t,1250*this.scene.cameras.main.width/3200)),t+=Phaser.Math.Between(100,1e3)*this.scene.cameras.main.width/3200}}handleCollider(t){for(let e=0;e<this.workers.length;e++)this.workers[e].handleCollider(t)}setNumWorker(t){if(this.workers.length>t)for(let e=this.workers.length-1;e>=t;e--)T.removeWorker(this.workers[e]),this.workers.pop();else if(this.workers.length<t){let e=this.scene.cameras.main.scrollX+this.scene.cameras.main.width+Phaser.Math.Between(100,1e3)*this.scene.cameras.main.width/3200;for(let s=this.workers.length;s<t;s++)this.workers.push(T.getWorker(this.scene,e,1250*this.scene.cameras.main.width/3200)),e+=Phaser.Math.Between(100,1e3)*this.scene.cameras.main.width/3200}}}class z{constructor(t,e){this.minSafeDistance=800,this.coinInRound=0,this.scene=t,this.numObject=e,this.zaps=[],this.coins=[],this.minSafeDistance=800*this.scene.cameras.main.width/3200;let s=3500*this.scene.cameras.main.width/3200;for(let i=0;i<e;i++)if(Phaser.Math.Between(0,99)<30){const e=T.getCoin(t,s,Phaser.Math.Between(400,800)*this.scene.cameras.main.width/3200);this.coins.push(e),s=e.getMaxX()+Phaser.Math.Between(300,600)*this.scene.cameras.main.width/3200}else{const e=T.getZap(t,0,0,0,0).setVisible(!1);e.reset(s),this.zaps.push(e),s=e.maxX()+Phaser.Math.Between(this.minSafeDistance,this.minSafeDistance+500*this.scene.cameras.main.width/3200)}this.coinInRound=0,this.coinInRoundText=this.scene.add.text(10*this.scene.cameras.main.width/3200,150*this.scene.cameras.main.width/3200,"0"),this.coinInRoundText.setFontSize("70px"),this.coinInRoundText.setAlign("right"),this.coinInRoundText.setColor("#ffe599"),this.coinInRoundText.setFontFamily(h),this.coinInRoundText.setStroke("#000000",5*this.scene.cameras.main.width/3200),this.coinInRoundText.setDepth(l.OBJECT_VERYLOW)}checkCollider(t){for(let e=0;e<this.coins.length;e++)this.coins[e].handleColliderWithPlayer(t,this);for(let e=0;e<this.zaps.length;e++){if(this.scene.matter.overlap(t,this.zaps[e].getBody()))return!0;if(this.zaps[e].minX()>t.x+t.width/2)break}return!1}update(t){let e=0;for(let e=0;e<this.zaps.length;e++)this.zaps[e].minX()<this.scene.cameras.main.scrollX+this.scene.cameras.main.width&&this.zaps[e].setVisible(!0),this.zaps[e].update(t);for(let t=0;t<this.zaps.length&&this.zaps[t].maxX()+75*this.scene.cameras.main.width/3200<this.scene.cameras.main.scrollX;t++)T.removeZap(this.zaps[t]),e++;e&&this.zaps.splice(0,e);for(let t=0;t<this.coins.length;t++)this.coins[t].getMaxX()<this.scene.cameras.main.scrollX&&(T.removeCoin(this.coins[t]),this.coins.splice(t,1),t--,e++);let s=this.scene.cameras.main.scrollX+this.scene.cameras.main.width;this.zaps.length>0&&(s=Math.max(s,this.zaps[this.zaps.length-1].maxX())),this.coins.length>0&&(s=Math.max(s,this.coins[this.coins.length-1].getMaxX())),s+=Phaser.Math.Between(this.minSafeDistance,this.minSafeDistance+500*this.scene.cameras.main.width/3200);for(let t=0;t<e;t++)if(Phaser.Math.Between(0,99)<30){const t=T.getCoin(this.scene,s,Phaser.Math.Between(400,800)*this.scene.cameras.main.width/3200);this.coins.push(t),s=t.getMaxX()+Phaser.Math.Between(300,600)*this.scene.cameras.main.width/3200}else{const t=T.getZap(this.scene,0,0,0,0);t.reset(s),this.zaps.push(t),s=t.maxX()+Phaser.Math.Between(this.minSafeDistance,this.minSafeDistance+500*this.scene.cameras.main.width/3200)}}setMinSafeDistance(t){this.minSafeDistance=t}getMinSafeDistance(){return this.minSafeDistance}setNewCoin(){this.coinInRoundText.setText(`${this.coinInRound}`),this.coinInRoundText.x=this.scene.cameras.main.scrollX+150}resetCoin(){this.coinInRound=0}addCoin(t=1){this.coinInRound+=t}getCoinInRound(){return this.coinInRound}}class X{constructor(t,e,s){this.position=0,this.scene=t,this.maps=[],this.tilesets=[],this.layers=[],this.rects=[];for(let i=0;i<e.length;i++){this.maps.push(this.scene.make.tilemap({key:e[i]}));const a=this.maps[i].addTilesetImage("ground",c.TILESET);a&&this.tilesets.push(a);const h=t.add.rectangle(this.position,0,16e3*t.cameras.main.width/3200,1600*t.cameras.main.height/1600,s[i]).setOrigin(0,0).setDepth(l.BACKGROUND_LOW);this.rects.push(h);const n=this.maps[i].createLayer("T1",this.tilesets[i],this.position,0);n&&(n.setDepth(l.BACKGROUND_MEDIUM).setOrigin(0,0).setScale(1600*t.cameras.main.height/1600/180),this.layers.push(n)),this.position+=16e3*t.cameras.main.width/3200}}update(){for(let t=0;t<this.layers.length;t++)this.layers[t].x+16e3*this.scene.cameras.main.width/3200<this.scene.cameras.main.scrollX&&(this.layers[t].x=this.position,this.rects[t].x=this.position,this.position+=16e3*this.scene.cameras.main.width/3200),this.layers[t].x>this.scene.cameras.main.scrollX+this.scene.cameras.main.width&&this.layers[t].visible?(this.layers[t].setVisible(!1),this.rects[t].setVisible(!1)):this.layers[t].visible||(this.layers[t].setVisible(!0),this.rects[t].setVisible(!0))}}const J=[],q=[];class j extends a.Scene{constructor(){super({key:i.MENU})}create(){var t;this.logoGlow=this.add.image(1750*this.cameras.main.width/3200,830*this.cameras.main.width/3200,c.TITLE_GLOW).setDepth(l.BACKGROUND_VERYHIGH).setScale(3*this.cameras.main.width/3200),this.logo=this.add.image(1800*this.cameras.main.width/3200,800*this.cameras.main.width/3200,c.TITLE).setDepth(l.BACKGROUND_VERYHIGH).setScale(1.5*this.cameras.main.width/3200),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys()),this.add.rectangle(0,0,500*this.cameras.main.width/3200,1600*this.cameras.main.width/3200,4660).setOrigin(0,0),this.adsBtn=new p(this,315*this.cameras.main.width/3200,100*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"ADS",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.adsBtn.setInteractive(),this.shopBtn=new p(this,315*this.cameras.main.width/3200,300*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"SHOP",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.shopBtn.setInteractive(),this.powerUpBtn=new p(this,315*this.cameras.main.width/3200,500*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"POWER-UPS",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.powerUpBtn.setInteractive(),this.costumesBtn=new p(this,315*this.cameras.main.width/3200,700*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"COSTUMES",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.costumesBtn.setInteractive(),this.halfBrickBtn=new p(this,315*this.cameras.main.width/3200,900*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"HALFBRICK",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.halfBrickBtn.setInteractive(),this.playBtn=new p(this,1800*this.cameras.main.width/3200,1300*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"PLAY",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.playBtn.setInteractive(),this.rect=this.add.rectangle(2400*this.cameras.main.width/3200,0,600*this.cameras.main.width/3200,125*this.cameras.main.width/3200,4660).setOrigin(0,0).setDepth(l.OBJECT_LOW);const e=C.getAllCoin();this.coinRect=new p(this,2580*this.cameras.main.width/3200,62.5*this.cameras.main.width/3200,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,String(e),{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h,color:"#FFF0C8"}),this.settingBtn=new p(this,2880*this.cameras.main.width/3200,62.5*this.cameras.main.width/3200,200*this.cameras.main.width/3200,100*this.cameras.main.width/3200,"Setting",{fontSize:50*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.settingBtn.setInteractive(),this.isSpaceClicked=!1,this.input.addPointer(1),this.music=this.sound.add(o.MUSIC_MENU,{volume:f.value}),this.music.play(),J.length=0,q.length=0;const s=[1,2,3];s.sort(((t,e)=>Math.random()-.5));for(let t=0;t<3;t++)switch(s[t]){case 1:J.push(m.MAP_1),q.push(11591910);break;case 2:J.push(m.MAP_2),q.push(16697498);break;case 3:J.push(m.MAP_3),q.push(13421772)}const i=this.make.tilemap({key:J[0]}),a=i.addTilesetImage("ground",c.TILESET);this.add.rectangle(500,0,16e3*this.cameras.main.width/3200,1600*this.cameras.main.height/1600,q[0]).setOrigin(0,0).setDepth(l.BACKGROUND_LOW),a&&(null===(t=i.createLayer("T1",a,500,0))||void 0===t||t.setDepth(l.BACKGROUND_MEDIUM).setOrigin(0,0).setScale(1600*this.cameras.main.height/1600/180));let n=Number(localStorage.getItem("highscore"));n||(n=0),this.add.text(2500,300,`Best: ${Math.floor(n)}`,{fontFamily:h,fontSize:60,color:"#ffffff",fontStyle:"bold"}).setDepth(l.OBJECT_LOW).setStroke("#000000",5)}update(){return this.music.setVolume(f.value),this.coinRect.getText().setText(String(C.getAllCoin())),this.adsBtn.getIsPointerDown()?(this.adsBtn.setIsPointerDown(!1),void window.open("https://www.youtube.com/watch?v=Jzxi8nid9BQ","_blank")):this.halfBrickBtn.getIsPointerDown()?(this.halfBrickBtn.setIsPointerDown(!1),void window.open("https://www.halfbrick.com/","_blank")):this.shopBtn.getIsPointerDown()?(this.shopBtn.setIsPointerDown(!1),this.scene.pause(i.MENU),void this.scene.launch(i.SHOP,{type:"product"})):this.costumesBtn.getIsPointerDown()?(this.costumesBtn.setIsPointerDown(!1),this.scene.pause(i.MENU),void this.scene.launch(i.SHOP,{type:"costume"})):this.settingBtn.getIsPointerDown()?(this.settingBtn.setIsPointerDown(!1),this.scene.pause(i.MENU),void this.scene.launch(i.SETTING,{scene:i.MENU,music:this.music})):void(this.playBtn.getIsPointerDown()&&!this.isSpaceClicked&&(this.isSpaceClicked=!0,this.music.stop(),this.tweens.add({targets:this.logo,alpha:0,duration:300}),this.tweens.add({targets:this.logoGlow,alpha:0,duration:300}),this.tweens.add({targets:this.rect,y:-150,duration:300}),this.tweens.add({targets:this.coinRect.getText(),y:-87.5*this.cameras.main.width/3200,duration:300}),this.tweens.add({targets:this.coinRect.getRectangle(),y:-87.5*this.cameras.main.width/3200,duration:300}),this.tweens.add({targets:this.settingBtn.getText(),y:-87.5*this.cameras.main.width/3200,duration:300}),this.tweens.add({targets:this.settingBtn.getRectangle(),y:-87.5*this.cameras.main.width/3200,duration:300}),this.tweens.add({targets:this.playBtn.getRectangle(),alpha:0,duration:300}),this.tweens.add({targets:this.playBtn.getText(),alpha:0,duration:300}),this.tweens.add({targets:this.cameras.main,scrollX:500*this.cameras.main.width/3200,duration:500,onComplete:()=>{setTimeout((()=>{this.music.stop(),this.scene.start(i.GAMEPLAY)}),200)}})))}}class Q extends a.Scene{constructor(){super({key:i.GAMEPLAY})}preload(){}create(){this.tileMap=new X(this,J,q);let t=Number(localStorage.getItem("highscore"));t||(t=0),this.add.text(2e3,300,`Best: ${Math.floor(t)}`,{fontFamily:h,fontSize:60,color:"#ffffff",fontStyle:"bold"}).setDepth(l.OBJECT_LOW).setStroke("#000000",5),this.cameras.main.shake(400,new a.Math.Vector2(.01,.01)),T.init(this),this.matter.world.setBounds(0,0,1e3*this.cameras.main.width/3200,1600*this.cameras.main.width/3200,64*this.cameras.main.width/3200,!1,!1,!0,!0),this.matter.world.enabled=!0,this.ground=this.matter.add.rectangle(0,1500*this.cameras.main.width/3200,1e9,120*this.cameras.main.width/3200,{isStatic:!0}),this.matter.world.add(this.ground),this.ground2=this.matter.add.rectangle(0,100*this.cameras.main.width/3200,1e9,120*this.cameras.main.width/3200,{isStatic:!0}),this.matter.world.add(this.ground2),this.player=new H(this,800*this.cameras.main.width/3200,1250*this.cameras.main.width/3200,r.BARRY_SPRITE_SHEET),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys()),this.rocketManager=new W(this,2),this.workerManager=new K(this,3),this.zapCoinManager=new z(this,3),this.score=new Y(this),this.cameras.main.startFollow(this.player,void 0,void 0,0,-800*this.cameras.main.width/3200,450*this.cameras.main.width/3200),this.input.addPointer(1),this.usingKey=this.usingTouch=!0,this.isTweenDead=!1,this.player.loadUserData(),this.music=this.sound.add(o.MUSIC_GAMEPLAY,{volume:f.value}),this.music.play()}update(t,e){var s,a,h;if(this.matter.world.update(t,e),this.tileMap.update(),this.music.setVolume(f.value),(null===(s=this.cursors.space)||void 0===s?void 0:s.isDown)?(this.usingKey=!0,this.usingTouch=!1,this.usingKey&&this.player.visible&&this.player.flying()):(null===(a=this.cursors.space)||void 0===a?void 0:a.isUp)&&this.usingKey&&this.player.falling(),(null===(h=this.cursors.shift)||void 0===h?void 0:h.isDown)&&(this.scene.pause(i.GAMEPLAY),this.scene.launch(i.PAUSE,{music:this.music})),this.input.pointer1.isDown?(this.usingKey=!1,this.usingTouch=!0,this.usingTouch&&this.player.visible&&this.player.flying()):this.usingTouch&&this.player.falling(),this.player.update(e),this.workerManager.update(e,this.player),this.workerManager.handleCollider(this.player),this.zapCoinManager.update(e),this.rocketManager.update(e,this.player),this.score.add(e,this.player.getSpeed()/10),this.music.isPlaying||this.isTweenDead||this.music.play(),(this.zapCoinManager.checkCollider(this.player)||this.rocketManager.checkCollider(this.player))&&(this.player.state=V.DEAD,this.player.getBulletFlash().setVisible(!1),!this.isTweenDead)){const t=this.add.sprite(this.player.x,this.player.y,c.BARRY_DEAD).setDepth(l.OBJECT_HIGH).setScale(this.cameras.main.width/3200);this.player.setVisible(!1);const e=this.player.getSpeed();this.player.setSpeed(0),this.tweens.add({targets:t,x:this.player.x+500*e,y:1450*this.cameras.main.width/3200,angle:90,duration:500,onComplete:()=>{console.log("You die!"),this.score.saveHighScore(),this.music.stop(),C.addCoin(this.zapCoinManager.getCoinInRound()),C.saveCoin(),this.scene.pause(),this.scene.launch(i.GAMEOVER,{score:this.score.getScore(),coin:this.zapCoinManager.getCoinInRound()})},onUpdate:()=>{this.player.setPosition(t.x,t.y)}}),this.isTweenDead=!0}this.zapCoinManager.setNewCoin(),this.score.getScore()>this.score.getLevel()&&(this.score.setLevel(this.score.getLevel()+100),this.player.setSpeed(this.evaluateSpeed(this.score.getScore(),this.player.getDefaultSpeed())),this.zapCoinManager.setMinSafeDistance(800*this.cameras.main.width/3200+30*this.player.getSpeed()))}evaluateSpeed(t,e){return Math.log10(.5*t/1e3+1)+e}}class Z extends a.Scene{constructor(){super({key:i.INIT})}preload(){this.load.image("loading-bg",c.LOGO2)}create(){}update(){this.scene.start(i.LOADING)}}class $ extends a.Scene{constructor(){super({key:i.LOADING})}preload(){this.progressBar=this.add.graphics(),this.progressBar.setDepth(l.BACKGROUND_HIGH),this.add.image(0,0,"loading-bg").setOrigin(0,0).setDisplaySize(3200*this.cameras.main.width/3200,1600*this.cameras.main.width/3200),this.load.on("progress",(t=>{this.progressBar.clear(),this.progressBar.fillStyle(11583223,1),this.progressBar.fillRoundedRect(750*this.cameras.main.width/3200,1250*this.cameras.main.width/3200,1600*t*this.cameras.main.width/3200,50*this.cameras.main.width/3200,20*this.cameras.main.width/3200),this.progressBar.lineStyle(5*this.cameras.main.width/3200,0),this.progressBar.strokeRoundedRect(750*this.cameras.main.width/3200,1250*this.cameras.main.width/3200,1600*this.cameras.main.width/3200,50*this.cameras.main.width/3200,20*this.cameras.main.width/3200)})),this.load.spritesheet(r.BARRY_SPRITE_SHEET,r.BARRY_SPRITE_SHEET,{frameWidth:93,frameHeight:95}),this.load.spritesheet(r.EXPLOSION,r.EXPLOSION,{frameWidth:64,frameHeight:64}),this.load.spritesheet(r.ORB_ANIM,r.ORB_ANIM,{frameWidth:62,frameHeight:42}),this.load.spritesheet(r.GLOW,r.GLOW,{frameWidth:128,frameHeight:128}),this.load.spritesheet(r.ZAP_EFFECT,r.ZAP_EFFECT,{frameWidth:256,frameHeight:117}),this.load.spritesheet(r.BULLET_FLASH,r.BULLET_FLASH,{frameWidth:64,frameHeight:64}),this.load.spritesheet(r.COIN_SPRITE,r.COIN_SPRITE,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.ALARM_LIGHT_EFFECT,r.ALARM_LIGHT_EFFECT,{frameWidth:422,frameHeight:384}),this.load.spritesheet(r.ROCKET,r.ROCKET,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.ROCKET_EFFECT,r.ROCKET_EFFECT,{frameWidth:64,frameHeight:64}),this.load.spritesheet(r.ROCKET_ALERT,r.ROCKET_ALERT,{frameWidth:64,frameHeight:64}),this.load.spritesheet(r.WORKER_1_BODY,r.WORKER_1_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.WORKER_2_BODY,r.WORKER_2_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.WORKER_1_HEAD,r.WORKER_1_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.WORKER_2_HEAD,r.WORKER_2_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.WORKER_FAT_BODY,r.WORKER_FAT_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(r.DAN_SPRITE_SHEET,r.DAN_SPRITE_SHEET,{frameWidth:91,frameHeight:103});for(let t=0;t<n.length;t++)this.load.text(`pattern${t}`,n[t]);for(const t of Object.values(c))this.load.image(t,t);for(const t of Object.values(o))this.load.audio(t,t);this.load.tilemapTiledJSON(m.MAP_1,m.MAP_1),this.load.tilemapTiledJSON(m.MAP_2,m.MAP_2),this.load.tilemapTiledJSON(m.MAP_3,m.MAP_3)}create(){}update(){this.scene.start(i.MENU)}}class tt extends a.Scene{constructor(){super({key:i.PAUSE})}init(t){this.music=t.music}create(){this.add.rectangle(0,0,3200*this.cameras.main.width/3200,1600*this.cameras.main.width/3200,0).setOrigin(0,0).setAlpha(.5),this.add.rectangle(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,950*this.cameras.main.width/3200,1250*this.cameras.main.width/3200,9085376).setOrigin(.5,0),this.add.rectangle(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,930*this.cameras.main.width/3200,1240*this.cameras.main.width/3200,2370630).setOrigin(.5,0),this.add.rectangle(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,1e3*this.cameras.main.width/3200,100*this.cameras.main.width/3200,5726049),this.add.nineslice(2100*this.cameras.main.width/3200,150*this.cameras.main.width/3200,c.BUTTON_BACKING,void 0,1e3*this.cameras.main.width/3200,50*this.cameras.main.width/3200),this.continueBtn=new p(this,2100*this.cameras.main.width/3200,500*this.cameras.main.width/3200,650*this.cameras.main.width/3200,200*this.cameras.main.width/3200,"CONTINUE",{color:"#ffffff",fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.continueBtn.setInteractive(),this.settingBtn=new p(this,2100*this.cameras.main.width/3200,800*this.cameras.main.width/3200,650*this.cameras.main.width/3200,200*this.cameras.main.width/3200,"SETTING",{color:"#ffffff",fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.settingBtn.setInteractive(),this.homeBtn=new p(this,2100*this.cameras.main.width/3200,1100*this.cameras.main.width/3200,650*this.cameras.main.width/3200,200*this.cameras.main.width/3200,"HOME",{color:"#ffffff",fontSize:80*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.homeBtn.setInteractive()}update(){if(this.homeBtn.getIsPointerDown())this.music.stop(),this.scene.stop(i.GAMEPLAY),this.scene.start(i.MENU);else if(this.continueBtn.getIsPointerDown())this.scene.resume(i.GAMEPLAY),this.scene.stop(i.PAUSE);else if(this.settingBtn.getIsPointerDown())return this.settingBtn.setIsPointerDown(!1),this.scene.pause(i.PAUSE),void this.scene.launch(i.SETTING,{scene:i.PAUSE,music:this.music})}}class et extends Phaser.Scene{constructor(){super({key:i.SETTING})}init(t){this.prevScene=t.scene,this.music=t.music}create(){this.add.rectangle(0,0,3200*this.cameras.main.width/3200,1600*this.cameras.main.width/3200,0).setOrigin(0,0).setAlpha(.8),this.add.rectangle(1600*this.cameras.main.width/3200,200*this.cameras.main.width/3200,2800*this.cameras.main.width/3200,1200*this.cameras.main.width/3200,2042180).setOrigin(.5,0),this.backBtn=new p(this,300*this.cameras.main.width/3200,100*this.cameras.main.width/3200,200*this.cameras.main.width/3200,80*this.cameras.main.width/3200,"BACK",{color:"#ffffff",fontSize:40*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.backBtn.setInteractive(),this.plusBtn=new p(this,2e3*this.cameras.main.width/3200,800*this.cameras.main.width/3200,230*this.cameras.main.width/3200,230*this.cameras.main.width/3200,"+",{color:"#ffffff",fontSize:130*this.cameras.main.width/3200,fontStyle:"bold"}),this.plusBtn.setInteractive(),this.minusBtn=new p(this,1200*this.cameras.main.width/3200,800*this.cameras.main.width/3200,230*this.cameras.main.width/3200,230*this.cameras.main.width/3200,"-",{color:"#ffffff",fontSize:130*this.cameras.main.width/3200,fontStyle:"bold"}),this.minusBtn.setInteractive(),this.volumeValue=this.add.text(1600*this.cameras.main.width/3200,800*this.cameras.main.width/3200,String(Math.ceil(100*f.value)),{fontSize:130*this.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}).setDepth(l.OBJECT_MEDIUM).setOrigin(.5,.5)}update(){this.backBtn.getIsPointerDown()?(this.scene.stop(i.SETTING),this.scene.resume(this.prevScene)):this.plusBtn.getIsPointerDown()?(f.value+=.005,f.value>=1&&(f.value=1),this.volumeValue.setText(String(Math.ceil(100*f.value))),this.music.setVolume(f.value)):this.minusBtn.getIsPointerDown()&&(f.value-=.005,f.value<=0&&(f.value=0),this.volumeValue.setText(String(Math.ceil(100*f.value))),this.music.setVolume(f.value))}}class st{constructor(t,e,s,i,a=""){this.imageKey=t,this.name=e,this.price=s,this.state=i,this.description=a}getImageKey(){return this.imageKey}getName(){return this.name}getPrice(){return this.price}getState(){return this.state}setState(t){this.state=t}getDescription(){return this.description}}class it{constructor(t,e,s,i,a){this.scene=t,this.product=i;const n=t.add.rectangle(200*t.cameras.main.width/3200,0,150*t.cameras.main.width/3200,150*t.cameras.main.width/3200,7374503).setOrigin(.5,.5),r=t.add.image(200*t.cameras.main.width/3200,0,i.getImageKey()).setDisplaySize(75*t.cameras.main.width/3200,75*t.cameras.main.width/3200).setOrigin(.5,.5),c=t.add.text(500*t.cameras.main.width/3200,0,i.getName(),{fontSize:60*this.scene.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}).setStroke("#000000",5*t.cameras.main.width/3200).setOrigin(.5,.5),o=t.add.text(a-500*t.cameras.main.width/3200,0,String(i.getPrice()),{fontSize:60*this.scene.cameras.main.width/3200,fontStyle:"bold",fontFamily:h,color:"#FFF0C8"}).setStroke("#000000",5*t.cameras.main.width/3200).setOrigin(.5,.5),m=t.add.text(a/2,0,i.getDescription(),{fontSize:60*this.scene.cameras.main.width/3200,fontFamily:h}).setStroke("#000000",5*t.cameras.main.width/3200).setOrigin(.5,.5);let l;switch(i.getState()){case D.EQUIPPED:l="UNEQUIP";break;case D.NOT_EQUIPPED:l="EQUIP";break;case D.HAVE_NOT_BOUGHT_YET:l="BUY"}this.button=new p(t,a-200*t.cameras.main.width/3200,0,200*t.cameras.main.width/3200,80*t.cameras.main.width/3200,l,{color:"#ffffff",fontSize:40*this.scene.cameras.main.width/3200,fontStyle:"bold",fontFamily:h}),this.button.setInteractive();const d=t.add.rectangle(0,120*t.cameras.main.width/3200,a,5*t.cameras.main.width/3200,16777215).setOrigin(0,0);this.container=t.add.container(e,s,[n,c,o,m,this.button.getRectangle(),this.button.getText(),this.button.getBlackRect(),d,r])}isButtonClicked(){return!!this.button.getIsPointerDown()&&(this.button.setIsPointerDown(!1),!0)}setState(t){let e;switch(this.product.setState(t),t){case D.EQUIPPED:e="UNEQUIP";break;case D.NOT_EQUIPPED:e="EQUIP";break;case D.HAVE_NOT_BOUGHT_YET:e="BUY"}this.button.getText().setText(e)}}class at extends a.Scene{constructor(){super({key:i.SHOP})}init(t){"product"==t.type?(this.keyList=R,this.nameList=B,this.priceList=M,this.descriptionList=P,this.index=0):"costume"==t.type&&(this.keyList=b,this.nameList=x,this.priceList=I,this.descriptionList=v,this.index=R.length)}create(){this.add.rectangle(0,0,3200,1600,0).setOrigin(0,0).setAlpha(.8),this.backBtn=new p(this,300,100,200,80,"BACK",{color:"#ffffff",fontSize:"40px",fontStyle:"bold",fontFamily:h}),this.backBtn.setInteractive(),this.add.text(1600,20,"SHOP",{fontSize:"110px",fontStyle:"bold",fontFamily:h}).setStroke("#000000",10).setOrigin(.5,0),this.add.rectangle(1600,200,2800,1200,2042180).setOrigin(.5,0),this.productTexture=[];let t=300;for(let e=0;e<this.keyList.length;e++){const s=new st(this.keyList[e],this.nameList[e],this.priceList[e],C.getProductState(e+this.index),this.descriptionList[e]);this.productTexture.push(new it(this,200,t,s,2800)),t+=220}}update(t,e){this.backBtn.getIsPointerDown()&&(this.scene.stop(i.SHOP),this.scene.resume(i.MENU));for(let t=0;t<this.productTexture.length;t++)if(this.productTexture[t].isButtonClicked()){switch(C.getProductState(t+this.index)){case D.EQUIPPED:C.unequip(t+this.index);break;case D.NOT_EQUIPPED:C.equip(t+this.index);break;case D.HAVE_NOT_BOUGHT_YET:C.canBuyProduct(t+this.index)&&C.buy(t+this.index,this.priceList[t])}this.productTexture[t].setState(C.getProductState(t+this.index))}}}const ht={title:"Jetpack Joyride",url:"https://github.com/leanhhuy0709/jetpack-joyride",version:"1.0",type:Phaser.AUTO,parent:"game",scene:[Z,$,j,Q,u,at,tt,et],input:{keyboard:!0},physics:{default:"matter",matter:{gravity:{y:.25},debug:{showBody:!1,showStaticBody:!1,lineColor:16519680}}},width:3200,height:1600,scale:{mode:Phaser.Scale.ScaleModes.ENVELOP,autoCenter:Phaser.Scale.Center.CENTER_BOTH,resizeInterval:1},backgroundColor:"#000000",render:{pixelArt:!0,antialias:!1}};class nt extends a.Game{constructor(t){super(t)}}window.addEventListener("load",(()=>{new nt(ht)}))}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var h=s[t]={exports:{}};return e[t].call(h.exports,h,h.exports,i),h.exports}i.m=e,t=[],i.O=(e,s,a,h)=>{if(!s){var n=1/0;for(m=0;m<t.length;m++){for(var[s,a,h]=t[m],r=!0,c=0;c<s.length;c++)(!1&h||n>=h)&&Object.keys(i.O).every((t=>i.O[t](s[c])))?s.splice(c--,1):(r=!1,h<n&&(n=h));if(r){t.splice(m--,1);var o=a();void 0!==o&&(e=o)}}return e}h=h||0;for(var m=t.length;m>0&&t[m-1][2]>h;m--)t[m]=t[m-1];t[m]=[s,a,h]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,h,[n,r,c]=s,o=0;if(n.some((e=>0!==t[e]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(c)var m=c(i)}for(e&&e(s);o<n.length;o++)h=n[o],i.o(t,h)&&t[h]&&t[h][0](),t[h]=0;return i.O(m)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=i.O(void 0,[216],(()=>i(375)));a=i.O(a)})();