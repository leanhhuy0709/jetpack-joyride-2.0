(()=>{"use strict";var t,e={791:(t,e,s)=>{var i,a=s(260);!function(t){t.MENU="MenuScene",t.GAMEPLAY="GamePlayScene",t.INIT="InitScene",t.GAMEOVER="GameOverScene",t.LOADING="LoadingScene",t.SHOP="ShopScene",t.PAUSE="PauseScene",t.SETTING="SettingScene"}(i||(i={}));const r="New Athletic M54",n=["assets/coin/patterns/coinPattern0.txt","assets/coin/patterns/coinPattern1.txt","assets/coin/patterns/coinPattern2.txt","assets/coin/patterns/coinPattern3.txt","assets/coin/patterns/coinPattern4.txt","assets/coin/patterns/coinPattern5.txt","assets/coin/patterns/coinPattern6.txt","assets/coin/patterns/coinPattern7.txt","assets/coin/patterns/coinPattern8.txt","assets/coin/patterns/coinPattern9.txt"];var h,o,l,c,p;!function(t){t.BARRY_SPRITE_SHEET="assets/barry/spritesheet.png",t.BARRY_BODY="assets/Characters/Barry/defaultBody.png",t.BARRY_HEAD="assets/Characters/Barry/defaultHead.png",t.BULLET_FLASH="assets/bullet/bullet-flash.png",t.EXPLOSION="assets/bullet/explosion-sprite.png",t.ORB_ANIM="assets/zap/orbAnim.png",t.GLOW="assets/zap/glow.png",t.ZAP_EFFECT="assets/zap/zapEffect.png",t.ZAP_SPRITE="assets/zap/spritesheet.png",t.COIN_SPRITE="assets/coin/coin-sprite.png",t.ALARM_LIGHT_EFFECT="assets/bg/Levels/Title/alarmGlow_TVOS.png",t.ROCKET="assets/missile/missile.png",t.ROCKET_ALERT="assets/missile/missileAlert.png",t.ROCKET_EFFECT="assets/missile/missileEffects.png",t.ROCKET_EXPLOSION="assets/missile/missileExplosion.png",t.WORKER_1_BODY="assets/workers/worker1Body.png",t.WORKER_1_HEAD="assets/workers/worker1Head.png",t.WORKER_2_BODY="assets/workers/worker2Body.png",t.WORKER_2_HEAD="assets/workers/worker2Head.png",t.WORKER_FAT_BODY="assets/workers/workerFatBody.png",t.WORKER_TALL_BODY="assets/workers/workerTallBody.png",t.DAN_SPRITE_SHEET="assets/dan/spritesheet.png"}(h||(h={})),function(t){t.BULLET="assets/bullet/1.png",t.COIN="assets/coin/1.png",t.BUTTON_BACKING="assets/UI/buttonBacking.png",t.TITLE="assets/bg/Levels/Title/Objects/title_small.png",t.TITLE_GLOW="assets/bg/Levels/Title/Objects/titleGlow_small.png",t.LOGO2="assets/logo2.jpg",t.START_ROOM_1="assets/bg/Levels/Title/start1.png",t.START_ROOM_2="assets/bg/Levels/Title/start2.png",t.START_ROOM="assets/bg/start.png",t.MID_ROOM="assets/bg/mid1.png",t.AQUA_ROOM="assets/bg/atlas/aquarium_assets.png",t.ALARM_LIGHT="assets/bg/Levels/Title/alarmLight_TVOS.png",t.BEST_SCREEN="assets/bg/Levels/Title/bestScreen.png",t.LIGHT="assets/bg/Levels/Title/title_light_TVOS.png",t.LIGHT_EFFECT_1="assets/bg/Levels/Title/lightEffect.png",t.LIGHT_EFFECT_2="assets/bg/Levels/Title/lightEffect2.png",t.TABLE="assets/bg/Levels/Title/table.png",t.RADIO="assets/bg/Levels/Title/radio.png",t.SMOKE="assets/bg/particles/smoke.png",t.DO_NOT_TOUCH="assets/bg/Levels/Title/doNotTouchSign_TVOS.png",t.SHOE="assets/equipment/shoe.png",t.GRAVITY_BELT="assets/equipment/gravity-belt.png",t.GRAVITY_SUIT="assets/equipment/gravity-suit.png",t.BARRY_DEAD="assets/barry/barry-dead.png",t.SHADOW="assets/barry/effect_shadow.png"}(o||(o={})),function(t){t.COIN_COLLECT_1="assets/SFX/Coin/coin_pickup_1.mp3",t.COIN_COLLECT_2="assets/SFX/Coin/coin_pickup_2.mp3",t.COIN_COLLECT_3="assets/SFX/Coin/coin_pickup_3.mp3",t.MUSIC_GAMEPLAY="assets/music/Music_Level.mp3",t.MUSIC_MENU="assets/music/Music_Menu.mp3"}(l||(l={})),function(t){t[t.BACKGROUND_VERYLOW=0]="BACKGROUND_VERYLOW",t[t.BACKGROUND_LOW=1]="BACKGROUND_LOW",t[t.BACKGROUND_MEDIUM=2]="BACKGROUND_MEDIUM",t[t.BACKGROUND_HIGH=3]="BACKGROUND_HIGH",t[t.BACKGROUND_VERYHIGH=4]="BACKGROUND_VERYHIGH",t[t.OBJECT_VERYLOW=5]="OBJECT_VERYLOW",t[t.OBJECT_LOW=6]="OBJECT_LOW",t[t.OBJECT_MEDIUM=7]="OBJECT_MEDIUM",t[t.OBJECT_HIGH=8]="OBJECT_HIGH",t[t.OBJECT_VERYHIGH=9]="OBJECT_VERYHIGH"}(c||(c={}));class d{constructor(t,e,s,i,a,r="",n){i&&a&&(this.rectangle=t.add.nineslice(e,s,o.BUTTON_BACKING,void 0,i,a,10,10).setDisplaySize(i,a).setDepth(c.OBJECT_MEDIUM)),this.text=t.add.text(e,s,r,n).setOrigin(.5,.5).setStroke("#000000",3).setDepth(c.OBJECT_MEDIUM),this.isPointerDown=!1,this.isPointerOver=!1,this.blackRect=t.add.rectangle(e,s,i,a,0,1).setDisplaySize(i,a).setSize(i,a).setAlpha(0).setDepth(c.OBJECT_MEDIUM),this.rectangle.setInteractive()}setInteractive(){this.rectangle.on("pointerdown",(()=>this.handlePointerDown(this))),this.rectangle.on("pointerup",(()=>this.handlePointerUp(this))),this.rectangle.on("pointerover",(()=>this.handlePointerOver(this))),this.rectangle.on("pointerout",(()=>this.handlePointerOut(this)))}handlePointerDown(t){this.isPointerDown=!0,t.blackRect.setAlpha(.5)}handlePointerUp(t){this.isPointerDown=!1,t.blackRect.setAlpha(0)}handlePointerOver(t){this.isPointerOver=!0,t.blackRect.setAlpha(.5)}handlePointerOut(t){this.isPointerOver=!1,t.blackRect.setAlpha(0)}getIsPointerDown(){return this.isPointerDown}getIsPointerOver(){return this.isPointerOver}getRectangle(){return this.rectangle}getText(){return this.text}getBlackRect(){return this.blackRect}setIsPointerDown(t){this.isPointerDown=t}}class m extends a.Scene{constructor(){super({key:i.GAMEOVER})}init(t){this.score=t.score,this.coin=t.coin}preload(){}create(){this.add.rectangle(0,0,3200,1600,0).setOrigin(0,0).setAlpha(.5),this.add.rectangle(2100,150,950,1250,9085376).setOrigin(.5,0),this.add.rectangle(2100,150,930,1240,2370630).setOrigin(.5,0),this.add.rectangle(2100,150,1e3,100,5726049),this.add.nineslice(2100,150,o.BUTTON_BACKING,void 0,1e3,50),this.add.text(2100,150,"RESULTS",{fontSize:"80px",fontStyle:"bold",fontFamily:r}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(2100,275,"DISTANCE",{fontSize:"80px",fontStyle:"bold",fontFamily:r}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(2100,400,`${Math.floor(this.score)}M`,{fontSize:"125px",fontFamily:r,fontStyle:"bold",color:"#fef03b"}).setOrigin(.5,.5).setStroke("#000000",1),this.add.text(1700,600,"COLLECTED",{fontSize:"60px",fontFamily:r,fontStyle:"bold"}).setOrigin(0,.5).setStroke("#000000",1),this.add.text(2450,600,`${this.coin}`,{fontSize:"60px",fontFamily:r,color:"#fef03b",fontStyle:"bold"}).setOrigin(1,.5).setStroke("#000000",1),this.add.image(2500,600,o.COIN).setDisplaySize(60,60),this.playAgainBtn=new d(this,2100,800,650,200,"PLAY AGAIN",{color:"#ffffff",fontSize:"80px",fontStyle:"bold",fontFamily:r}),this.playAgainBtn.setInteractive(),this.homeBtn=new d(this,2100,1100,650,200,"HOME",{color:"#ffffff",fontSize:"80px",fontStyle:"bold",fontFamily:r}),this.homeBtn.setInteractive()}update(){this.homeBtn.getIsPointerDown()?(this.scene.stop(i.GAMEPLAY),this.scene.start(i.MENU)):this.playAgainBtn.getIsPointerDown()&&(this.scene.stop(i.GAMEPLAY),this.scene.start(i.GAMEPLAY))}}!function(t){t[t.MOVE=0]="MOVE",t[t.RUN=1]="RUN",t[t.DEAD=2]="DEAD"}(p||(p={}));class u{constructor(t,e,s,i=h.WORKER_2_HEAD,a=h.WORKER_2_BODY){this.scene=t,this.body=this.scene.matter.add.sprite(e,s+43,a,void 0).setDepth(c.OBJECT_MEDIUM).setScale(4).setFixedRotation().setCollisionGroup(-2),this.head=this.scene.matter.add.sprite(e,s,i,void 0).setDepth(c.OBJECT_MEDIUM).setScale(4).setFixedRotation().setCollisionGroup(-2),this.scene.anims.exists(a+"move")||this.scene.anims.create({key:a+"move",frames:this.body.anims.generateFrameNumbers(a,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"move")||this.scene.anims.create({key:i+"move",frames:this.head.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(a+"run")||this.scene.anims.create({key:a+"run",frames:this.body.anims.generateFrameNumbers(a,{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"run")||this.scene.anims.create({key:i+"run",frames:this.head.anims.generateFrameNumbers(i,{start:4,end:7}),frameRate:10,repeat:-1}),this.velocity=(Math.random()-.5)/2,this.velocity<0?this.velocity-=.1:this.velocity+=.1,this.state=p.MOVE,this.state==p.MOVE?(this.head.play(i+"move"),this.body.play(a+"move")):this.state==p.RUN&&(this.head.play(i+"run"),this.body.play(a+"run")),this.headKey=i,this.bodyKey=a,this.velocity<0?(this.body.setFlipX(!0),this.head.setFlipX(!0)):(this.body.setFlipX(!1),this.head.setFlipX(!1)),this.headTranslationX=0,this.headTranslationY=-43,this.shadow=t.add.sprite(e,s+160,o.SHADOW).setDepth(c.OBJECT_LOW).setScale(3).setAlpha(0)}update(t,e){var s,i;if(this.state==p.DEAD)return this.head.setTexture(this.headKey,13),void this.body.setTexture(this.bodyKey,13);this.state==p.MOVE?((null===(s=this.head.anims.currentAnim)||void 0===s?void 0:s.key)!=this.headKey+"move"&&(this.head.play(this.headKey+"move"),this.body.play(this.bodyKey+"move")),this.body.x+=this.velocity*t):this.state==p.RUN&&((null===(i=this.head.anims.currentAnim)||void 0===i?void 0:i.key)!=this.headKey+"run"&&(this.head.play(this.headKey+"run"),this.body.play(this.bodyKey+"run")),this.body.x+=this.velocity*t*1.5),this.head.x=this.body.x+this.headTranslationX,this.head.y=this.body.y+this.headTranslationY,Math.abs(e.x-this.body.x)<300&&(this.state=p.RUN),this.scene.matter.world.localWorld.gravity.y>0?(this.body.setFlipY(!1),this.head.setFlipY(!1),this.headTranslationX=0,this.headTranslationY=-43):(this.body.setFlipY(!0),this.head.setFlipY(!0),this.headTranslationX=0,this.headTranslationY=43),this.shadow.setPosition(this.body.x,this.shadow.y).setAlpha((this.body.y-320)/980).setScale(3*(this.body.y-320)/980).setVisible(this.body.visible)}handleCollider(t){if(this.state==p.DEAD)return;const e=t.getBullets();for(let t=0;t<e.length;t++)if(this.scene.matter.overlap(e[t],this.getBody())){this.state=p.DEAD;break}}getBody(){return[this.head,this.body]}setAll(t,e,s,i=h.WORKER_2_HEAD,a=h.WORKER_2_BODY){this.scene=t,this.body.x=e,this.head.x=e,this.body.y=s+43,this.head.y=s,this.headKey=i,this.bodyKey=a,this.head.setTexture(i),this.body.setTexture(a),this.scene.anims.exists(a+"move")||this.scene.anims.create({key:a+"move",frames:this.body.anims.generateFrameNumbers(a,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"move")||this.scene.anims.create({key:i+"move",frames:this.head.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:10,repeat:-1}),this.scene.anims.exists(a+"run")||this.scene.anims.create({key:a+"run",frames:this.body.anims.generateFrameNumbers(a,{start:4,end:7}),frameRate:10,repeat:-1}),this.scene.anims.exists(i+"run")||this.scene.anims.create({key:i+"run",frames:this.head.anims.generateFrameNumbers(i,{start:4,end:7}),frameRate:10,repeat:-1}),this.velocity=(Math.random()-.5)/2,this.velocity<0?this.velocity-=.1:this.velocity+=.1,this.state=p.MOVE,this.velocity<0?(this.body.setFlipX(!0),this.head.setFlipX(!0)):(this.body.setFlipX(!1),this.head.setFlipX(!1))}getMaxX(){return this.body.x+this.body.width}setVisible(t){this.body.setVisible(t),this.head.setVisible(t)}}class g extends Phaser.Physics.Matter.Sprite{constructor(t,e,s,i){super(t.matter.world,e,s,i),this.setDisplaySize(24,62.4).setDepth(c.OBJECT_LOW).setCollisionGroup(-2),t.add.existing(this),this.setAll(t,e,s,i)}setAll(t,e,s,i){if(this.setRotation(0).setFixedRotation().setPosition(e+Phaser.Math.Between(-15,15),s).setTexture(i),this.body){const t=Phaser.Math.Between(-5,15),e=30;this.setVelocityY(e),this.setVelocityX(t),t>0?this.setRotation(Math.atan(e/t)-Math.PI/2):t<0&&this.setRotation(Math.atan(e/t)+Math.PI/2)}}}class y extends Phaser.GameObjects.Sprite{constructor(t,e,s,i){super(t,e,s,i),this.setDepth(c.OBJECT_MEDIUM).setDisplaySize(110,92),t.add.existing(this),this.scene.anims.exists("explosion")||this.scene.anims.create({key:"explosion",frames:this.anims.generateFrameNumbers(i,{start:0,end:3}),frameRate:40,repeat:1}),this.setAll(t,e,s,i)}setAll(t,e,s,i){this.setPosition(e,s+Phaser.Math.Between(-10,20)).setTexture(i).setAlpha(1),t.add.existing(this),this.anims.play("explosion"),t.tweens.add({targets:this,alpha:0,duration:100})}}class f{}f.value=.5;class E{constructor(t,e,s,i=1){this.scene=t,this.coinPatternIdx=i,i>=n.length&&(i=0);const a=this.scene.cache.text.get(`pattern${i}`);let r=0,o=0;const p=70,d=this.scene.add.sprite(-20,-20,h.COIN_SPRITE);this.scene.anims.exists("turn")||this.scene.anims.create({key:"turn",frames:d.anims.generateFrameNumbers(h.COIN_SPRITE,{start:0,end:7}),frameRate:10,repeat:-1}),this.coins=[],this.minX=e,this.maxX=e,this.minY=s,this.maxY=s;for(let t=0;t<a.length;t++)"\n"!=a[t]?("1"==a[t]&&(this.coins.push(this.scene.matter.add.sprite(e+o*p,s+r*p,h.COIN_SPRITE,0,{isStatic:!0}).setDisplaySize(50,50).play("turn").setCollisionGroup(-2).setDepth(c.OBJECT_LOW)),this.minX=Math.min(this.minX,e+o*p),this.maxX=Math.max(this.maxX,e+o*p),this.minY=Math.min(this.minY,s+r*p),this.maxY=Math.max(this.maxY,s+r*p)),o++):(r++,o=0);E.sound1||(E.sound1=this.scene.sound.add(l.COIN_COLLECT_1)),E.sound2||(E.sound2=this.scene.sound.add(l.COIN_COLLECT_2)),E.sound3||(E.sound3=this.scene.sound.add(l.COIN_COLLECT_3)),E.sound1.stop(),E.sound2.stop(),E.sound3.stop()}handleColliderWithPlayer(t,e){const s=100;if(!(t.x-s>this.maxX+this.coins[0].width/2||t.x+s<this.minX-this.coins[0].width/2||t.y+s<this.minY-this.coins[0].height/2||t.y-s>this.maxY+this.coins[0].height/2))for(let s=0;s<this.coins.length;s++)this.scene.matter.overlap(t,[this.coins[s]])&&this.coins[s].visible&&(this.coins[s].setVisible(!1),e.addCoin(),E.playSound())}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}setVisible(t){for(let e=0;e<this.coins.length;e++)this.coins[e].setVisible(t);return this}setAll(t,e,s){this.scene=t;const i=this.scene.cache.text.get(`pattern${this.coinPatternIdx}`);let a=0,r=0;const n=70;this.minX=e,this.maxX=e,this.minY=s,this.maxY=s;let h=0;for(let t=0;t<i.length;t++)"\n"!=i[t]?("1"==i[t]&&(this.coins[h++].setPosition(e+r*n,s+a*n).play("turn").setCollisionGroup(-2).setVisible(!0),this.minX=Math.min(this.minX,e+r*n),this.maxX=Math.max(this.maxX,e+r*n),this.minY=Math.min(this.minY,s+a*n),this.maxY=Math.max(this.maxY,s+a*n)),r++):(a++,r=0);return this}static playSound(){E.sound1.setVolume(f.value),E.sound1.play()}}class S{constructor(t){this.scene=t}update(t){}reset(t){}maxX(){return 0}maxY(){return 0}minX(){return 0}minY(){return 0}getBody(){return[this.rect]}}class O extends S{constructor(t,e,s){super(t),this.rect=this.scene.matter.add.sprite(e,s,h.ROCKET,void 0,{isStatic:!0}).setScale(3).setRectangle(85,50).setStatic(!0).setDepth(c.OBJECT_MEDIUM).setCollisionGroup(-2),this.scene.anims.exists("rocket-turn")||this.scene.anims.create({key:"rocket-turn",frames:this.rect.anims.generateFrameNumbers(h.ROCKET,{start:0,end:3}),frameRate:10,repeat:-1}),this.rect.anims.play("rocket-turn"),this.fire=this.scene.matter.add.sprite(e+80,s,h.ROCKET_EFFECT,void 0,{isStatic:!0}).setDepth(c.OBJECT_MEDIUM).setScale(2).setRectangle(85,50).setStatic(!0).setCollisionGroup(-2),this.scene.anims.exists("rocket-fire")||this.scene.anims.create({key:"rocket-fire",frames:this.rect.anims.generateFrameNumbers(h.ROCKET_EFFECT,{start:0,end:3}),frameRate:10,repeat:-1}),this.fire.anims.play("rocket-fire"),this.alert=this.scene.add.sprite(e,s,h.ROCKET_ALERT).setDepth(c.OBJECT_MEDIUM).setScale(2.5),this.scene.anims.exists("alert")||this.scene.anims.create({key:"alert",frames:this.alert.anims.generateFrameNumbers(h.ROCKET_ALERT,{start:0,end:7}),frameRate:5,repeat:0}),this.speed=Phaser.Math.Between(10,20),this.moveY=Phaser.Math.Between(1,9),this.isWaiting=!1}update(t,e=void 0){if(this.isWaiting&&this.alert.anims.isPlaying){const t=this.moveY;e&&(Math.abs(e.y-this.alert.y)<t&&(this.alert.y=e.y),e.y>this.alert.y?this.alert.y+=t:e.y<this.alert.y&&(this.alert.y-=t)),this.alert.x=this.scene.cameras.main.scrollX+3150,this.rect.y=this.fire.y=this.alert.y,this.rect.x=this.alert.x+100,this.fire.x=this.alert.x+100+80}this.isWaiting&&!this.alert.anims.isPlaying&&(this.rect.visible||(this.rect.setVisible(!0),this.fire.setVisible(!0),this.alert.setVisible(!1)),this.rect.x-=this.speed,this.fire.x-=this.speed)}reset(t){this.rect.x=t+100,this.fire.x=t+80+100,this.alert.x=t;const e=Phaser.Math.Between(400,600);this.rect.y=e,this.fire.y=e,this.alert.y=e,this.isWaiting=!1,this.speed=Phaser.Math.Between(10,20),this.moveY=Phaser.Math.Between(1,9),this.rect.setVisible(!1),this.fire.setVisible(!1),this.alert.setVisible(!0)}maxX(){return this.fire.x+this.fire.width}maxY(){return this.fire.y+this.fire.height}minX(){return this.rect.x}minY(){return this.rect.y}getBody(){return[this.rect,this.fire]}startAlert(){this.alert.play("alert"),this.isWaiting=!0}setAll(t,e,s){this.scene=t,this.rect.x=e+100,this.fire.x=e+80+100,this.alert.x=e,this.rect.y=s,this.fire.y=s,this.alert.y=s,this.speed=Phaser.Math.Between(10,20),this.moveY=Phaser.Math.Between(1,9),this.isWaiting=!1,this.rect.setVisible(!1),this.fire.setVisible(!1),this.alert.setVisible(!0)}}class _ extends S{constructor(t,e,s,i,a){super(t),this.sprite1=t.matter.add.sprite(e,s,h.ORB_ANIM,0,{isStatic:!0}).setCircle(30).setDisplaySize(124,84).setStatic(!0).setDepth(c.OBJECT_HIGH).setCollisionGroup(-2),this.sprite1.anims.create({key:"turn1",frames:this.sprite1.anims.generateFrameNumbers(h.ORB_ANIM,{start:0,end:2}),frameRate:10,repeat:-1}),this.sprite2=t.matter.add.sprite(i,a,h.ORB_ANIM,0,{isStatic:!0}).setCircle(30).setDisplaySize(124,84).setStatic(!0).setDepth(c.OBJECT_HIGH).setCollisionGroup(-2),this.spinChance=.1,this.hardChance=.1,this.sprite2.anims.create({key:"turn2",frames:this.sprite2.anims.generateFrameNumbers(h.ORB_ANIM,{start:0,end:2}),frameRate:10,repeat:-1}),this.glow1=t.add.sprite(e,s,h.GLOW,0).setDepth(c.BACKGROUND_MEDIUM).setDisplaySize(230,230),this.glow1.anims.create({key:"bloom1",frames:this.glow1.anims.generateFrameNumbers(h.GLOW,{start:0,end:15}),frameRate:10,repeat:-1}),this.glow2=t.add.sprite(i,a,h.GLOW,0).setDepth(c.BACKGROUND_MEDIUM).setDisplaySize(230,230),this.glow2.anims.create({key:"bloom2",frames:this.glow2.anims.generateFrameNumbers(h.GLOW,{start:0,end:15}),frameRate:10,repeat:-1}),this.rect=t.matter.add.sprite((e+i)/2,(s+a)/2,h.ZAP_EFFECT,0,{isStatic:!0}).setOrigin(.5,.5).setDepth(c.OBJECT_LOW).setRotation(0).setCollisionGroup(-2),this.rect.anims.create({key:"electric",frames:this.rect.anims.generateFrameNumbers(h.ZAP_EFFECT,{start:0,end:3}),frameRate:10,repeat:-1}),this.sprite1.anims.play("turn1"),this.sprite2.anims.play("turn2"),this.glow1.anims.play("bloom1"),this.glow2.anims.play("bloom2"),this.rect.play("electric")}update(t){if(this.sprite1.x>this.sprite2.x){let t=this.sprite1.x;this.sprite1.x=this.sprite2.x,this.sprite2.x=t,t=this.sprite1.y,this.sprite1.y=this.sprite2.y,this.sprite2.y=t}if(this.isSpin){let e=(this.sprite1.x+this.sprite2.x)/2,s=(this.sprite1.y+this.sprite2.y)/2,i=this.sprite1.x,a=this.sprite1.y,r=this.sprite2.x,n=this.sprite2.y;const h=1e-4;this.sprite1.x=e+(i-e)*Math.cos(t*h*Math.PI)-(a-s)*Math.sin(t*h*Math.PI),this.sprite1.y=s+(i-e)*Math.sin(t*h*Math.PI)+(a-s)*Math.cos(t*h*Math.PI),this.sprite2.x=e+(r-e)*Math.cos(t*h*Math.PI)-(n-s)*Math.sin(t*h*Math.PI),this.sprite2.y=s+(r-e)*Math.sin(t*h*Math.PI)+(n-s)*Math.cos(t*h*Math.PI),e=(this.sprite1.x+this.sprite2.x)/2,s=(this.sprite1.y+this.sprite2.y)/2,i=this.sprite1.x,a=this.sprite1.y,r=this.sprite2.x,n=this.sprite2.y,r==i&&(r+=1e-11),this.sprite1.setRotation(Math.PI/2+Math.atan((n-a)/(r-i))),this.sprite2.setRotation(-Math.PI/2+Math.atan((n-a)/(r-i))),this.glow1.setRotation(Math.PI/2+Math.atan((n-a)/(r-i))),this.glow2.setRotation(-Math.PI/2+Math.atan((n-a)/(r-i)))}this.updateRect(),this.updateGlow();const e=this.scene;this.evaluateSpinChance(e.score.getScore())}updateGlow(){this.glow1.x=this.sprite1.x,this.glow1.y=this.sprite1.y,this.glow2.x=this.sprite2.x,this.glow2.y=this.sprite2.y}updateRect(){this.rect.x=(this.sprite1.x+this.sprite2.x)/2,this.rect.y=(this.sprite1.y+this.sprite2.y)/2,this.rect.setRotation(0);let t=0;0==Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))&&(t=1e-4),this.rect.setDisplaySize(Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))+t,100).setRectangle(Math.sqrt(Math.pow(this.sprite1.x-this.sprite2.x,2)+Math.pow(this.sprite1.y-this.sprite2.y,2))+t,50).setCollisionGroup(-2),t=0,this.sprite2.x-this.sprite1.x==0&&(t=1e-4),this.rect.setRotation(Math.atan((this.sprite2.y-this.sprite1.y)/(this.sprite2.x-this.sprite1.x+t)))}reset(t){const e=t+Phaser.Math.Between(0,300),s=e+Phaser.Math.Between(200,500),i=Phaser.Math.Between(650,1e3);let a=Phaser.Math.Between(650,1e3);const r=Math.random();r<this.hardChance?a=1250:r<2*this.hardChance&&(a=300),this.sprite1.setRotation(Math.PI/2+Math.atan((a-i)/(s-e))),this.sprite2.setRotation(-Math.PI/2+Math.atan((a-i)/(s-e))),this.setAll(this.scene,e,i,s,a),10==Phaser.Math.Between(0,10)?this.isSpin=!0:this.isSpin=!1}maxX(){return this.sprite2.x>this.sprite1.x?this.sprite2.x:this.sprite1.x}minX(){return this.sprite2.x<this.sprite1.x?this.sprite2.x:this.sprite1.x}maxY(){return this.sprite2.y>this.sprite1.y?this.sprite2.y:this.sprite1.y}minY(){return this.sprite2.y<this.sprite1.y?this.sprite2.y:this.sprite1.y}getBody(){return[this.sprite1,this.sprite2,this.rect]}setAll(t,e,s,i,a){if(e>i){let t=e;e=i,i=t,t=s,s=a,a=t}this.sprite1.x=e,this.sprite2.x=i,this.sprite1.y=s,this.sprite2.y=a,this.updateRect(),this.updateGlow(),Math.random()<this.spinChance?this.isSpin=!0:this.isSpin=!1}evaluateSpinChance(t){this.spinChance=Math.log10(.5*t/123+1)/3,this.spinChance>.6&&(this.spinChance=.6),this.hardChance=Math.log10(.5*t/123+1)/6,this.hardChance>.3&&(this.hardChance=.3)}}class x{static init(t){x.clear();for(let e=0;e<5;e++)x.removeBullet(new g(t,100,100,o.BULLET)),x.removeExplosion(new y(t,100,100,h.EXPLOSION)),x.removeZap(new _(t,-100,-100,-100,-100)),x.removeRocket(new O(t,-100,-100));const e=[];for(let t=0;t<n.length;t++)e.push(t);e.sort(((t,e)=>Math.random()-.5));for(let s=0;s<n.length;s++){const i=new E(t,110,110,e[s]).setVisible(!1);x.coins.push(i)}}static getBullet(t,e,s,i){if(x.bullets.length>0){const a=x.bullets.pop();return a.setVisible(!0).setAll(t,e,s,i),a}return x.count++,new g(t,e,s,i)}static removeBullet(t){t.setVisible(!1),x.bullets.push(t)}static getExplosion(t,e,s,i){if(x.explosions.length>0){const a=x.explosions.pop();return a.setVisible(!0).setAll(t,e,s,i),a}return x.count++,new y(t,e,s,i)}static removeExplosion(t){t.setVisible(!1),x.explosions.push(t)}static getZap(t,e,s,i,a){if(x.zaps.length>0){const r=x.zaps.pop();return r.setAll(t,e,s,i,a),r}return x.count++,new _(t,e,s,i,a)}static removeZap(t){x.zaps.push(t)}static removeObstacle(t){t instanceof _&&x.removeZap(t)}static clear(){x.bullets=[],x.explosions=[],x.count=0,x.rockets=[],x.zaps=[],x.coins=[],x.workers=[]}static getCoin(t,e,s){if(x.coins.length>0){const i=x.coins.pop();return i.setAll(t,e,s),i}return x.count++,new E(t,e,s,0)}static removeCoin(t){x.coins.push(t)}static getRocket(t,e,s){if(x.rockets.length>0){const i=x.rockets.pop();return i.setAll(t,e,s),i}return x.count++,new O(t,e,s)}static removeRocket(t){x.rockets.push(t)}static getWorker(t,e,s){let i=h.WORKER_1_HEAD,a=h.WORKER_1_BODY;switch(i=Phaser.Math.Between(0,1)%2?h.WORKER_1_HEAD:h.WORKER_2_HEAD,Phaser.Math.Between(0,2)){case 0:a=h.WORKER_1_BODY;break;case 1:a=h.WORKER_2_BODY;break;case 2:a=h.WORKER_FAT_BODY}if(x.workers.length>0){const r=x.workers.pop();return r.setAll(t,e,s,i,a),r.setVisible(!0),r}return x.count++,new u(t,e,s,i,a)}static removeWorker(t){x.workers.push(t),t.setVisible(!1)}}x.bullets=[],x.explosions=[],x.zaps=[],x.count=0,x.coins=[],x.rockets=[],x.workers=[];const R=[h.DAN_SPRITE_SHEET],T=["Dan"],I=[9999],B=["Dan the mannn!"],D=[o.SHOE,o.GRAVITY_BELT,h.WORKER_1_HEAD,o.GRAVITY_SUIT],w=["Shoe","Gravity Belt","AntiWorker","Gravity Suit"],b=[3e3,5999,1e3,99999],M=["run faster at start","Fall faster","No Worker, no dead","Reverse Gravity"];var v;!function(t){t.EQUIPPED="equiped",t.NOT_EQUIPPED="not_equipped",t.HAVE_NOT_BOUGHT_YET=""}(v||(v={}));class C{static init(){if(C.isInit)return;C.isInit=!0;let t=0;for(t=0;t<D.length;t++){const e=localStorage.getItem("product-"+String(t));"equiped"==e?C.productState.push(v.EQUIPPED):"not_equipped"==e?C.productState.push(v.NOT_EQUIPPED):C.productState.push(v.HAVE_NOT_BOUGHT_YET),C.productName.push(w[t]),C.productPrice.push(b[t])}for(;t-D.length<R.length;t++){const e=localStorage.getItem("product-"+String(t));"equiped"==e?C.productState.push(v.EQUIPPED):"not_equipped"==e?C.productState.push(v.NOT_EQUIPPED):C.productState.push(v.HAVE_NOT_BOUGHT_YET),C.productName.push(T[t-D.length]),C.productPrice.push(I[t-D.length])}localStorage.getItem("allCoin")?this.allCoin=Number(localStorage.getItem("allCoin")):this.allCoin=0,C.numProduct=C.productState.length}static getProductState(t){return C.isInit||C.init(),t>=C.productState.length?v.HAVE_NOT_BOUGHT_YET:C.productState[t]}static canBuyProduct(t){return C.isInit||C.init(),C.productState[t]==v.HAVE_NOT_BOUGHT_YET&&C.allCoin>=this.productPrice[t]}static buy(t,e){C.isInit||C.init(),C.productState[t]==v.HAVE_NOT_BOUGHT_YET&&(C.productState[t]=v.NOT_EQUIPPED,C.allCoin-=e,localStorage.setItem("product-"+String(t),"not_equipped"),C.saveCoin())}static equip(t){C.isInit||C.init(),C.productState[t]==v.NOT_EQUIPPED&&(C.productState[t]=v.EQUIPPED,localStorage.setItem("product-"+String(t),"equiped"))}static unequip(t){C.isInit||C.init(),C.productState[t]==v.EQUIPPED&&(C.productState[t]=v.NOT_EQUIPPED,localStorage.setItem("product-"+String(t),"not_equipped"))}static getAllCoin(){return C.isInit||C.init(),C.allCoin}static addCoin(t){C.isInit||C.init(),C.allCoin+=t,localStorage.setItem("allCoin",`${C.allCoin}`)}static saveCoin(){localStorage.setItem("allCoin",`${C.allCoin}`)}static getNumProduct(){return C.numProduct}static getProductName(t){return C.isInit||C.init(),t>=C.productName.length?"":C.productName[t]}}C.isInit=!1,C.allCoin=0,C.productName=[],C.productState=[],C.productPrice=[],C.numProduct=0;class P{constructor(t){this.player=t}init(){}update(t){}flying(){}falling(){}moving(){}remove(){}}class A extends P{constructor(t){super(t),this.gravity_effect=this.player.scene.add.sprite(1e3,1e3,h.ROCKET_EFFECT,5).setDepth(c.OBJECT_MEDIUM).setScale(3.5).setAngle(-90).setVisible(!1),this.player.scene.anims.exists("gravity_effect")||this.player.scene.anims.create({key:"gravity_effect",frames:this.gravity_effect.anims.generateFrameNumbers(h.ROCKET_EFFECT,{start:4,end:7}),frameRate:10,repeat:-1}),this.gravity_effect.play("gravity_effect"),this.transitionX=-10,this.transitionY=20}init(){const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,2.5*t),this.player.setJumpVelo(1.5*G)}update(t){this.gravity_effect.setPosition(this.player.x+this.transitionX,this.player.y+this.transitionY),this.player.playerState==H.FALLING&&this.player.visible?this.gravity_effect.setVisible(!0):this.gravity_effect.setVisible(!1);const e=this.player.scene.matter.world.localWorld.gravity.y<0;this.gravity_effect.flipX!=e&&(this.player.scene.anims.remove("gravity_effect"),this.gravity_effect.setFlipX(e),this.player.scene.anims.create({key:"gravity_effect",frames:this.gravity_effect.anims.generateFrameNumbers(h.ROCKET_EFFECT,{start:4,end:7}),frameRate:10,repeat:-1}),this.gravity_effect.play("gravity_effect"),e?(this.transitionX=-15,this.transitionY=-20):(this.transitionX=-15,this.transitionY=20))}remove(){const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,t/2),this.player.setJumpVelo(G)}}class k extends P{constructor(t){super(t)}init(){this.player.setDefaultSpeed(1.5*this.player.getDefaultSpeed())}remove(){this.player.setDefaultSpeed(this.player.getDefaultSpeed())}}class N extends P{init(){this.player.scene.workerManager.setNumWorker(0)}remove(){this.player.scene.workerManager.setNumWorker(10)}}class F extends P{constructor(t){super(t)}init(){const t=h.DAN_SPRITE_SHEET;this.player.texture.key=h.DAN_SPRITE_SHEET,this.player.scene.anims.remove("move"),this.player.scene.anims.remove("fly"),this.player.scene.anims.remove("fall"),this.player.scene.anims.create({key:"move",frames:this.player.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fly",frames:this.player.anims.generateFrameNumbers(t,{start:2,end:2}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fall",frames:this.player.anims.generateFrameNumbers(t,{start:3,end:3}),frameRate:10,repeat:-1}),this.player.play("move")}remove(){const t=h.BARRY_SPRITE_SHEET;this.player.texture.key=t,this.player.scene.anims.remove("move"),this.player.scene.anims.remove("fly"),this.player.scene.anims.remove("fall"),this.player.scene.anims.create({key:"move",frames:this.player.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fly",frames:this.player.anims.generateFrameNumbers(t,{start:2,end:2}),frameRate:10,repeat:-1}),this.player.scene.anims.create({key:"fall",frames:this.player.anims.generateFrameNumbers(t,{start:3,end:3}),frameRate:10,repeat:-1}),this.player.play("move")}}class L extends P{constructor(t){super(t),this.count=0,this.flyFlag=!1}init(){this.player.canFireBullet=!1}update(t){}remove(){const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,Math.abs(t)),this.player.setJumpVelo(G)}flying(){this.flyFlag=!0}falling(){if(this.flyFlag){this.count++;const t=this.player.scene.matter.world.localWorld.gravity.y;this.player.scene.matter.world.setGravity(0,-t),-t>0?this.player.setFlipY(!1):this.player.setFlipY(!0),this.player.setJumpVelo(0),this.flyFlag=!1}}}const G=-8;var H;!function(t){t.FLYING="Fly",t.FALLING="Fall",t.MOVING="Move",t.DEAD="Dead"}(H||(H={}));class U extends a.Physics.Matter.Sprite{constructor(t,e,s,i){super(t.matter.world,e,s,i),this.jumpVelo=G,this.setDisplaySize(140,160).setRectangle(80,150).setFixedRotation().setCollisionGroup(-2).setDepth(c.OBJECT_VERYHIGH).setOrigin(.65,.5),this.initBullet(),this.equipments=[],this.playerState=H.MOVING,this.scene.add.existing(this),this.createAnims(i),this.defaultSpeed=.5,this.speed=this.defaultSpeed,this.canFireBullet=!0,this.shadow=t.add.sprite(e,s+120,o.SHADOW).setDepth(c.OBJECT_MEDIUM).setScale(3).setAlpha(0)}createAnims(t){this.scene.anims.exists("move")&&this.scene.anims.remove("move"),this.scene.anims.create({key:"move",frames:this.anims.generateFrameNumbers(t,{start:0,end:1}),frameRate:10,repeat:-1}),this.scene.anims.exists("fly")&&this.scene.anims.remove("fly"),this.scene.anims.create({key:"fly",frames:this.anims.generateFrameNumbers(t,{start:3,end:3}),frameRate:10,repeat:1}),this.scene.anims.exists("fall")&&this.scene.anims.remove("fall"),this.scene.anims.create({key:"fall",frames:this.anims.generateFrameNumbers(t,{start:2,end:2}),frameRate:10,repeat:1}),this.scene.anims.exists("flash")||this.scene.anims.create({key:"flash",frames:this.bulletFlash.anims.generateFrameNumbers(h.BULLET_FLASH,{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.play("move"),this.bulletFlash.play("flash")}initBullet(){this.bullets=[],this.explosions=[],this.delayFire=2,this.bulletFlash=this.scene.add.sprite(0,0,h.BULLET_FLASH).setDisplaySize(150,150).setDepth(c.OBJECT_HIGH)}loadUserData(){for(let t=0;t<C.getNumProduct();t++)if(C.getProductState(t)==v.EQUIPPED)switch(C.getProductName(t)){case"Gravity Belt":this.addEquipment(new A(this));break;case"Shoe":this.addEquipment(new k(this));break;case"AntiWorker":this.addEquipment(new N(this));break;case"Dan":this.addEquipment(new F(this));break;case"Gravity Suit":this.addEquipment(new L(this))}}update(t){super.update();const e=this.scene;switch(this.x+=t*this.speed,this.playerState){case H.MOVING:e.matter.overlap(this,[e.ground,e.ground2])||this.falling();break;case H.FLYING:break;case H.FALLING:e.matter.overlap(this,[e.ground,e.ground2])?this.moving():this.falling();break;case H.DEAD:this.bulletFlash.setVisible(!1)}this.updateBullet(t),this.shadow.setPosition(this.x-10,this.shadow.y).setAlpha((this.y-320)/980).setScale(3*(this.y-320)/980).setVisible(this.visible);for(let e=0;e<this.equipments.length;e++)this.equipments[e].update(t)}updateBullet(t){const e=this.scene;for(let s=0;s<this.getBullets().length;s++)this.bullets[s].update(t),e.matter.overlap(this.bullets[s],[e.ground])&&(this.explosions.push(x.getExplosion(this.scene,this.bullets[s].x,this.bullets[s].y,h.EXPLOSION)),x.removeBullet(this.bullets[s]),this.bullets.splice(s,1),s--);let s=0;for(let t=0;t<this.explosions.length&&0==this.explosions[t].alpha;t++)x.removeExplosion(this.explosions[t]),s++;s>0&&this.explosions.splice(0,s),this.bulletFlash.setPosition(this.x-11,this.y+135)}fireBullet(){this.delayFire+=.5,this.delayFire>=2&&(this.bullets.push(x.getBullet(this.scene,this.x-10,this.y+95,o.BULLET)),this.delayFire-=2)}flying(){this.canFireBullet&&(this.getVelocity()&&(this.getVelocity()&&this.getVelocity().y>this.jumpVelo?this.setVelocityY(Number(this.getVelocity().y)+this.jumpVelo/20):this.setVelocityY(this.jumpVelo)),this.fireBullet(),this.bulletFlash.setVisible(!0)),this.playerState=H.FLYING,this.anims.play("fly");for(let t=0;t<this.equipments.length;t++)this.equipments[t].flying()}falling(){const t=this.scene;t.matter.overlap(this,[t.ground,t.ground2])||(this.playerState=H.FALLING,this.anims.play("fall"),this.bulletFlash.setVisible(!1));for(let t=0;t<this.equipments.length;t++)this.equipments[t].falling()}moving(){this.anims.play("move"),this.playerState=H.MOVING}getBullets(){return this.bullets}getSpeed(){return this.speed}setSpeed(t){this.speed=t}setJumpVelo(t){this.jumpVelo=t}getJumpVelo(){return this.jumpVelo}addEquipment(t){t.init(),this.equipments.push(t)}getEquipments(){return this.equipments}removeEquipment(t){for(let e=0;e<this.equipments.length;e++)if(this.equipments[e]instanceof t){this.equipments[e].remove(),this.equipments.splice(e,1);break}}getDefaultSpeed(){return this.defaultSpeed}setDefaultSpeed(t){this.defaultSpeed=t}getBulletFlash(){return this.bulletFlash}}class Y extends Phaser.GameObjects.Text{constructor(t){super(t,10,60,"0",{}),this.scene.add.existing(this),this.setFontSize("80px"),this.setColor("#ffffff"),this.setFontFamily(r),this.setStroke("#000000",5),this.setDepth(c.OBJECT_VERYLOW),this.score=0,localStorage.getItem("highscore")?this.highScore=Number(localStorage.getItem("highscore")):this.highScore=0,this.level=100}add(t,e=1){this.score+=t*e,this.highScore<this.score&&(this.highScore=this.score),this.setNewScore()}setNewScore(){this.setText(`${Math.floor(this.score)}`),this.x=this.scene.cameras.main.scrollX+10}resetScore(){this.score=0,this.setNewScore()}getLevel(){return this.level}setLevel(t){this.level=t}getScore(){return this.score}saveHighScore(){localStorage.setItem("highscore",`${this.highScore}`)}}class V{constructor(t,e){this.scene=t,this.position=0,this.image1=this.scene.add.image(this.position,0,e).setOrigin(0,0),this.image2=this.scene.add.image(this.position+this.image1.width,0,e).setOrigin(0,0),this.image3=this.scene.add.image(this.position+this.image1.width,0,e).setOrigin(0,0),this.width=this.image1.width}update(){this.position+this.width<=this.scene.cameras.main.scrollX&&(this.position+=this.width),this.image1.x=this.position,this.image2.x=this.position+this.width,this.image3.x=this.image2.x+this.width}setImage(t,e,s){this.image1=t,this.image2=e,this.image3=s,this.position=t.x,this.width=t.width}setWidth(t){this.width=t}}class K{constructor(t,e){this.scene=t,this.rockets=[],this.minDistance=3500,this.rocketIdx=[];let s=Phaser.Math.Between(this.minDistance,2*this.minDistance);for(let t=0;t<e;t++)this.rocketIdx.push(s),s+=Phaser.Math.Between(this.minDistance,2*this.minDistance)}checkCollider(t){for(let e=0;e<this.rockets.length;e++)if(this.scene.matter.overlap(t,this.rockets[e].getBody()))return!0;return!1}update(t,e){if(this.rocketIdx[0]<this.scene.cameras.main.scrollX+3200){let t=0;const e=[0,50,20,10,10,10],s=Phaser.Math.Between(1,100);let i=0;for(let a=0;a<e.length;a++)if(i+=e[a],s<=i){t=a;break}for(let e=0;e<t;e++){const t=x.getRocket(this.scene,0,0);t.reset(this.rocketIdx[0]),t.startAlert(),this.rockets.push(t)}this.rocketIdx.splice(0,1),this.rocketIdx.push(this.rocketIdx[this.rocketIdx.length-1]+Phaser.Math.Between(this.minDistance,2*this.minDistance))}let s=0;for(let i=0;i<this.rockets.length;i++)this.rockets[i].update(t,e),this.rockets[i].maxX()<this.scene.cameras.main.scrollX&&s++;if(s==this.rockets.length){for(let t=0;t<this.rockets.length;t++)x.removeRocket(this.rockets[t]);this.rockets=[]}const i=this.scene;this.evaluateMinDistance(i.score.getScore())}evaluateMinDistance(t,e=4500){this.minDistance=e-1300*Math.log10(.5*t/923+1),this.minDistance<e-2e3&&(this.minDistance=e-2e3)}}class W{constructor(t,e){this.scene=t,this.workers=[];let s=4e3;for(let i=0;i<e;i++)this.workers.push(x.getWorker(t,s,1200)),s+=Phaser.Math.Between(100,1e3)}update(t,e){let s=0;for(let i=0;i<this.workers.length;i++)this.workers[i].update(t,e),this.workers[i].getMaxX()<this.scene.cameras.main.scrollX&&s++;if(s==this.workers.length){for(let t=0;t<s;t++)x.removeWorker(this.workers[t]);this.workers=[];let t=this.scene.cameras.main.scrollX+3200+Phaser.Math.Between(100,1e3);for(let e=0;e<s;e++)this.workers.push(x.getWorker(this.scene,t,1200)),t+=Phaser.Math.Between(100,1e3)}}handleCollider(t){for(let e=0;e<this.workers.length;e++)this.workers[e].handleCollider(t)}setNumWorker(t){if(this.workers.length>t)for(let e=this.workers.length-1;e>=t;e--)x.removeWorker(this.workers[e]),this.workers.pop();else if(this.workers.length<t){let e=this.scene.cameras.main.scrollX+3200+Phaser.Math.Between(100,1e3);for(let s=this.workers.length;s<t;s++)this.workers.push(x.getWorker(this.scene,e,1200)),e+=Phaser.Math.Between(100,1e3)}}}class z{constructor(t,e){this.minSafeDistance=800,this.coinInRound=0,this.scene=t,this.numObject=e,this.zaps=[],this.coins=[],this.minSafeDistance=800;let s=3500;for(let i=0;i<e;i++)if(Phaser.Math.Between(0,99)<30){const e=x.getCoin(t,s,Phaser.Math.Between(400,800));this.coins.push(e),s=e.getMaxX()+Phaser.Math.Between(300,600)}else{const e=x.getZap(t,0,0,0,0);e.reset(s),this.zaps.push(e),s=e.maxX()+Phaser.Math.Between(this.minSafeDistance,this.minSafeDistance+500)}this.coinInRound=0,this.coinInRoundText=this.scene.add.text(10,150,"0"),this.coinInRoundText.setFontSize("70px"),this.coinInRoundText.setAlign("right"),this.coinInRoundText.setColor("#ffe599"),this.coinInRoundText.setFontFamily(r),this.coinInRoundText.setStroke("#000000",5),this.coinInRoundText.setDepth(c.OBJECT_VERYLOW)}checkCollider(t){for(let e=0;e<this.coins.length;e++)this.coins[e].handleColliderWithPlayer(t,this);for(let e=0;e<this.zaps.length;e++){if(this.scene.matter.overlap(t,this.zaps[e].getBody()))return!0;if(this.zaps[e].minX()>t.x+t.width/2)break}return!1}update(t){let e=0;for(let e=0;e<this.zaps.length;e++)this.zaps[e].update(t);for(let t=0;t<this.zaps.length&&this.zaps[t].maxX()+75<this.scene.cameras.main.scrollX;t++)x.removeZap(this.zaps[t]),e++;e&&this.zaps.splice(0,e);for(let t=0;t<this.coins.length;t++)this.coins[t].getMaxX()<this.scene.cameras.main.scrollX&&(x.removeCoin(this.coins[t]),this.coins.splice(t,1),t--,e++);let s=this.scene.cameras.main.scrollX+3200;this.zaps.length>0&&(s=Math.max(s,this.zaps[this.zaps.length-1].maxX())),this.coins.length>0&&(s=Math.max(s,this.coins[this.coins.length-1].getMaxX())),s+=Phaser.Math.Between(this.minSafeDistance,this.minSafeDistance+500);for(let t=0;t<e;t++)if(Phaser.Math.Between(0,99)<30){const t=x.getCoin(this.scene,s,Phaser.Math.Between(400,800));this.coins.push(t),s=t.getMaxX()+Phaser.Math.Between(300,600)}else{const t=x.getZap(this.scene,0,0,0,0);t.reset(s),this.zaps.push(t),s=t.maxX()+Phaser.Math.Between(this.minSafeDistance,this.minSafeDistance+500)}}setMinSafeDistance(t){this.minSafeDistance=t}getMinSafeDistance(){return this.minSafeDistance}setNewCoin(){this.coinInRoundText.setText(`${this.coinInRound}`),this.coinInRoundText.x=this.scene.cameras.main.scrollX+10}resetCoin(){this.coinInRound=0}addCoin(t=1){this.coinInRound+=t}getCoinInRound(){return this.coinInRound}}class X{constructor(t,e,s){if(t.add.image(e,0,o.START_ROOM).setOrigin(0,.125).setCrop(0,200,1749,1200).setDisplaySize(2332,256e4/1200).setDepth(c.BACKGROUND_VERYHIGH),t.add.image(1600+e,600,o.ALARM_LIGHT).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5),s){const s=t.add.sprite(1470+e,710,h.ALARM_LIGHT_EFFECT).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5);t.anims.exists("alarm-light-turn")||t.anims.create({key:"alarm-light-turn",frames:t.anims.generateFrameNumbers(h.ALARM_LIGHT_EFFECT,{start:0,end:5}),frameRate:5,repeat:-1}),s.play("alarm-light-turn")}t.add.image(1200+e,1150,o.BEST_SCREEN).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5),t.add.image(500+e,400,o.LIGHT).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.7),t.add.image(510+e,1365,o.LIGHT_EFFECT_1).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.7),t.add.image(500+e,525,o.LIGHT_EFFECT_2).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.7),t.add.image(600+e,1220,o.TABLE).setDepth(c.BACKGROUND_VERYHIGH).setScale(4.4),t.add.image(610+e,1120,o.RADIO).setDepth(c.BACKGROUND_VERYHIGH).setScale(2);let i=0;localStorage.getItem("highscore")&&(i=parseInt(localStorage.getItem("highscore"))),t.add.text(e+1200,1110,`BEST ${i}`,{fontSize:"40px",fontFamily:r}).setDepth(c.OBJECT_MEDIUM).setOrigin(.5,0)}}class J extends a.Scene{constructor(){super({key:i.GAMEPLAY})}preload(){}create(){this.background=new V(this,o.MID_ROOM);const t=this.add.image(1655,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200).setDepth(c.BACKGROUND_MEDIUM),e=this.add.image(4349.666666666666,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200).setDepth(c.BACKGROUND_MEDIUM),s=this.add.image(4349.666666666666,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200).setDepth(c.BACKGROUND_MEDIUM);this.background.setImage(t,e,s),this.background.setWidth(3233600/1200),new X(this,0,!0),this.cameras.main.shake(400,new a.Math.Vector2(.01,.01)),x.init(this),this.matter.world.setBounds(0,0,1e3,1600,64,!1,!1,!0,!0),this.matter.world.enabled=!0,this.ground=this.matter.add.rectangle(0,1500,1e9,250,{isStatic:!0}),this.matter.world.add(this.ground),this.ground2=this.matter.add.rectangle(0,120,1e9,250,{isStatic:!0}),this.matter.world.add(this.ground2),this.player=new U(this,800,1250,h.BARRY_SPRITE_SHEET),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys()),this.rocketManager=new K(this,3),this.workerManager=new W(this,5),this.zapCoinManager=new z(this,5),this.score=new Y(this),this.cameras.main.startFollow(this.player,void 0,void 0,0,-800,450),this.input.addPointer(1),this.usingKey=this.usingTouch=!0,this.isTweenDead=!1,this.player.loadUserData(),this.tweenStart(),this.music=this.sound.add(l.MUSIC_GAMEPLAY,{volume:f.value}),this.music.play(),this.fpsText=this.add.text(3200,100,"100fps",{fontSize:"80px",fontStyle:"bold",fontFamily:r}).setDepth(c.OBJECT_VERYHIGH).setOrigin(1,0)}tweenStart(){this.player.setVisible(!1),this.player.setSpeed(0);for(let t=0;t<1e3;t++){const t=a.Math.Between(1,15),e=a.Math.Between(2e3,2400),s=a.Math.Between(-400,-100),i=a.Math.Between(5,15),r=a.Math.Between(-300,300),n=this.add.image(r,this.evaluateSmokeYPosition(r,s,i),o.SMOKE).setDepth(c.OBJECT_VERYHIGH).setScale(t).setAlpha(Math.random()).setAngle(a.Math.Between(0,360));this.tweens.add({targets:n,x:e,alpha:0,duration:a.Math.Between(2e3,4e3),delay:a.Math.Between(0,100),ease:"Power2",onComplete:()=>{n.destroy()},onUpdate:()=>{n.y=this.evaluateSmokeYPosition(n.x,s,i),n.setScale((e-n.x)/e*t),n.x>=800&&n.y>1250&&(n.alpha=0)}})}const t=this.add.image(370,1300,o.DO_NOT_TOUCH).setDepth(c.OBJECT_VERYHIGH).setScale(1.7);this.tweens.add({targets:t,x:2300,duration:2e3,delay:a.Math.Between(0,100),onUpdate:()=>{t.y=this.evaluateSmokeYPosition(t.x,-200,6.5),t.setAngle(t.x/2400*360+90)}});const e=this.add.sprite(100,1300.05,this.player.texture.key).setDepth(c.OBJECT_MEDIUM).setDisplaySize(140,160).play("move");this.add.tween({targets:e,x:800,duration:1e3,ease:"Power2",onComplete:()=>{this.player.setSpeed(this.player.getDefaultSpeed()),this.player.setVisible(!0),e.destroy()}})}update(t,e){var s,a,r;if(this.matter.world.update(t,e),this.music.setVolume(f.value),this.background.update(),(null===(s=this.cursors.space)||void 0===s?void 0:s.isDown)?(this.usingKey=!0,this.usingTouch=!1,this.usingKey&&this.player.visible&&this.player.flying()):(null===(a=this.cursors.space)||void 0===a?void 0:a.isUp)&&this.usingKey&&this.player.falling(),(null===(r=this.cursors.shift)||void 0===r?void 0:r.isDown)&&(this.scene.pause(i.GAMEPLAY),this.scene.launch(i.PAUSE,{music:this.music})),this.input.pointer1.isDown?(this.usingKey=!1,this.usingTouch=!0,this.usingTouch&&this.player.visible&&this.player.flying()):this.usingTouch&&this.player.falling(),this.player.update(e),this.workerManager.update(e,this.player),this.workerManager.handleCollider(this.player),this.zapCoinManager.update(e),this.rocketManager.update(e,this.player),this.score.add(e,this.player.getSpeed()/10),this.music.isPlaying||this.isTweenDead||this.music.play(),(this.zapCoinManager.checkCollider(this.player)||this.rocketManager.checkCollider(this.player))&&(this.player.state=H.DEAD,this.player.getBulletFlash().setVisible(!1),!this.isTweenDead)){const t=this.add.sprite(this.player.x,this.player.y,o.BARRY_DEAD).setDepth(c.OBJECT_HIGH);this.player.setVisible(!1);const e=this.player.getSpeed();this.player.setSpeed(0),this.tweens.add({targets:t,x:this.player.x+500*e,y:1350,angle:90,duration:500,onComplete:()=>{console.log("You die!"),this.score.saveHighScore(),this.music.stop(),C.addCoin(this.zapCoinManager.getCoinInRound()),C.saveCoin(),this.scene.pause(),this.scene.launch(i.GAMEOVER,{score:this.score.getScore(),coin:this.zapCoinManager.getCoinInRound()})},onUpdate:()=>{this.player.setPosition(t.x,t.y)}}),this.isTweenDead=!0}this.zapCoinManager.setNewCoin(),this.score.getScore()>this.score.getLevel()&&(this.score.setLevel(this.score.getLevel()+100),this.player.setSpeed(this.evaluateSpeed(this.score.getScore(),this.player.getDefaultSpeed())),this.zapCoinManager.setMinSafeDistance(800+30*this.player.getSpeed())),this.matter.config.debug&&(this.matter.config.debug.showBody?this.fpsText.setVisible(!0):this.fpsText.setVisible(!1)),this.fpsText.setText(`FPS: ${Math.floor(this.game.loop.actualFps)}`).setPosition(this.cameras.main.scrollX+3200,100)}evaluateSmokeYPosition(t,e,s){return.5*s*Math.pow((t-1e3)/100,2)+1e3+e}evaluateSpeed(t,e){return Math.log10(.5*t/1e3+1)+e}}class q extends a.Scene{constructor(){super({key:i.INIT})}preload(){this.load.image("loading-bg",o.LOGO2)}create(){}update(){this.scene.start(i.LOADING)}}class Q extends a.Scene{constructor(){super({key:i.LOADING})}preload(){this.progressBar=this.add.graphics(),this.progressBar.setDepth(c.BACKGROUND_HIGH),this.add.image(this.cameras.main.width/2,this.cameras.main.height/2,"loading-bg").setDisplaySize(this.cameras.main.width,this.cameras.main.height),this.load.on("progress",(t=>{this.progressBar.clear(),this.progressBar.fillStyle(11583223,1),this.progressBar.fillRoundedRect(750,1250,1600*t,50,20),this.progressBar.lineStyle(5,0),this.progressBar.strokeRoundedRect(750,1250,1600,50,20)})),this.load.spritesheet(h.BARRY_SPRITE_SHEET,h.BARRY_SPRITE_SHEET,{frameWidth:93,frameHeight:95}),this.load.spritesheet(h.BARRY_BODY,h.BARRY_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.BARRY_HEAD,h.BARRY_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.EXPLOSION,h.EXPLOSION,{frameWidth:64,frameHeight:64}),this.load.spritesheet(h.ORB_ANIM,h.ORB_ANIM,{frameWidth:62,frameHeight:42}),this.load.spritesheet(h.GLOW,h.GLOW,{frameWidth:128,frameHeight:128}),this.load.spritesheet(h.ZAP_EFFECT,h.ZAP_EFFECT,{frameWidth:256,frameHeight:117}),this.load.spritesheet(h.BULLET_FLASH,h.BULLET_FLASH,{frameWidth:64,frameHeight:64}),this.load.spritesheet(h.COIN_SPRITE,h.COIN_SPRITE,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.ALARM_LIGHT_EFFECT,h.ALARM_LIGHT_EFFECT,{frameWidth:422,frameHeight:384}),this.load.spritesheet(h.ROCKET,h.ROCKET,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.ROCKET_EFFECT,h.ROCKET_EFFECT,{frameWidth:64,frameHeight:64}),this.load.spritesheet(h.ROCKET_ALERT,h.ROCKET_ALERT,{frameWidth:64,frameHeight:64}),this.load.spritesheet(h.WORKER_1_BODY,h.WORKER_1_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.WORKER_2_BODY,h.WORKER_2_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.WORKER_1_HEAD,h.WORKER_1_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.WORKER_2_HEAD,h.WORKER_2_HEAD,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.WORKER_FAT_BODY,h.WORKER_FAT_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.WORKER_TALL_BODY,h.WORKER_TALL_BODY,{frameWidth:32,frameHeight:32}),this.load.spritesheet(h.DAN_SPRITE_SHEET,h.DAN_SPRITE_SHEET,{frameWidth:91,frameHeight:103});for(let t=0;t<n.length;t++)this.load.text(`pattern${t}`,n[t]);for(const t of Object.values(o))this.load.image(t,t);for(const t of Object.values(l))this.load.audio(t,t)}create(){}update(){this.scene.start(i.MENU)}}class j extends a.Scene{constructor(){super({key:i.MENU})}preload(){}create(){this.add.image(2155,0,o.MID_ROOM).setOrigin(0,.125).setCrop(0,200,2021,1200).setDisplaySize(3233600/1200,256e4/1200),new X(this,500,!1),this.add.image(870,1300,o.DO_NOT_TOUCH).setDepth(c.OBJECT_VERYHIGH).setScale(1.7),this.logoGlow=this.add.image(1750,830,o.TITLE_GLOW).setDepth(c.BACKGROUND_VERYHIGH).setScale(3),this.logo=this.add.image(1800,800,o.TITLE).setDepth(c.BACKGROUND_VERYHIGH).setScale(1.5),this.input.keyboard&&(this.cursors=this.input.keyboard.createCursorKeys()),this.add.rectangle(0,0,500,1600,4660).setOrigin(0,0),this.adsBtn=new d(this,250,100,300,100,"ADS",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.adsBtn.setInteractive(),this.shopBtn=new d(this,250,300,300,100,"SHOP",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.shopBtn.setInteractive(),this.powerUpBtn=new d(this,250,500,300,100,"POWER-UPS",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.powerUpBtn.setInteractive(),this.costumesBtn=new d(this,250,700,300,100,"COSTUMES",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.costumesBtn.setInteractive(),this.halfBrickBtn=new d(this,250,900,300,100,"HALFBRICK",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.halfBrickBtn.setInteractive(),this.playBtn=new d(this,1800,1300,300,100,"PLAY",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.playBtn.setInteractive(),this.rect=this.add.rectangle(2400,0,600,125,4660).setOrigin(0,0).setDepth(c.OBJECT_LOW);const t=C.getAllCoin();this.coinRect=new d(this,2580,62.5,300,100,String(t),{fontSize:"50px",fontStyle:"bold",fontFamily:r,color:"#FFF0C8"}),this.settingBtn=new d(this,2880,62.5,200,100,"Setting",{fontSize:"50px",fontStyle:"bold",fontFamily:r}),this.settingBtn.setInteractive(),this.isSpaceClicked=!1,this.input.addPointer(1),this.music=this.sound.add(l.MUSIC_MENU,{volume:f.value}),this.music.play()}update(){return this.music.setVolume(f.value),this.coinRect.getText().setText(String(C.getAllCoin())),this.adsBtn.getIsPointerDown()?(this.adsBtn.setIsPointerDown(!1),void window.open("https://www.youtube.com/watch?v=Jzxi8nid9BQ","_blank")):this.halfBrickBtn.getIsPointerDown()?(this.halfBrickBtn.setIsPointerDown(!1),void window.open("https://www.halfbrick.com/","_blank")):this.shopBtn.getIsPointerDown()?(this.shopBtn.setIsPointerDown(!1),this.scene.pause(i.MENU),void this.scene.launch(i.SHOP,{type:"product"})):this.costumesBtn.getIsPointerDown()?(this.costumesBtn.setIsPointerDown(!1),this.scene.pause(i.MENU),void this.scene.launch(i.SHOP,{type:"costume"})):this.settingBtn.getIsPointerDown()?(this.settingBtn.setIsPointerDown(!1),this.scene.pause(i.MENU),void this.scene.launch(i.SETTING,{scene:i.MENU,music:this.music})):void(this.playBtn.getIsPointerDown()&&!this.isSpaceClicked&&(this.isSpaceClicked=!0,this.music.stop(),this.tweens.add({targets:this.logo,alpha:0,duration:300}),this.tweens.add({targets:this.logoGlow,alpha:0,duration:300}),this.tweens.add({targets:this.rect,y:-150,duration:300}),this.tweens.add({targets:this.coinRect.getText(),y:-87.5,duration:300}),this.tweens.add({targets:this.coinRect.getRectangle(),y:-87.5,duration:300}),this.tweens.add({targets:this.settingBtn.getText(),y:-87.5,duration:300}),this.tweens.add({targets:this.settingBtn.getRectangle(),y:-87.5,duration:300}),this.tweens.add({targets:this.playBtn.getRectangle(),alpha:0,duration:300}),this.tweens.add({targets:this.playBtn.getText(),alpha:0,duration:300}),this.tweens.add({targets:this.cameras.main,scrollX:500,duration:500,onComplete:()=>{setTimeout((()=>{this.music.stop(),this.scene.start(i.GAMEPLAY)}),200)}})))}}class Z extends a.Scene{constructor(){super({key:i.PAUSE})}init(t){this.music=t.music}create(){this.add.rectangle(0,0,3200,1600,0).setOrigin(0,0).setAlpha(.5),this.add.rectangle(2100,150,950,1250,9085376).setOrigin(.5,0),this.add.rectangle(2100,150,930,1240,2370630).setOrigin(.5,0),this.add.rectangle(2100,150,1e3,100,5726049),this.add.nineslice(2100,150,o.BUTTON_BACKING,void 0,1e3,50),this.continueBtn=new d(this,2100,500,650,200,"CONTINUE",{color:"#ffffff",fontSize:"80px",fontStyle:"bold",fontFamily:r}),this.continueBtn.setInteractive(),this.settingBtn=new d(this,2100,800,650,200,"SETTING",{color:"#ffffff",fontSize:"80px",fontStyle:"bold",fontFamily:r}),this.settingBtn.setInteractive(),this.homeBtn=new d(this,2100,1100,650,200,"HOME",{color:"#ffffff",fontSize:"80px",fontStyle:"bold",fontFamily:r}),this.homeBtn.setInteractive()}update(){if(this.homeBtn.getIsPointerDown())this.music.stop(),this.scene.stop(i.GAMEPLAY),this.scene.start(i.MENU);else if(this.continueBtn.getIsPointerDown())this.scene.resume(i.GAMEPLAY),this.scene.stop(i.PAUSE);else if(this.settingBtn.getIsPointerDown())return this.settingBtn.setIsPointerDown(!1),this.scene.pause(i.PAUSE),void this.scene.launch(i.SETTING,{scene:i.PAUSE,music:this.music})}}class $ extends Phaser.Scene{constructor(){super({key:i.SETTING})}init(t){this.prevScene=t.scene,this.music=t.music}create(){this.add.rectangle(0,0,3200,1600,0).setOrigin(0,0).setAlpha(.8),this.add.rectangle(1600,200,2800,1200,2042180).setOrigin(.5,0),this.backBtn=new d(this,300,100,200,80,"BACK",{color:"#ffffff",fontSize:"40px",fontStyle:"bold",fontFamily:r}),this.backBtn.setInteractive(),this.plusBtn=new d(this,2e3,800,230,230,"+",{color:"#ffffff",fontSize:"130px",fontStyle:"bold"}),this.plusBtn.setInteractive(),this.minusBtn=new d(this,1200,800,230,230,"-",{color:"#ffffff",fontSize:"130px",fontStyle:"bold"}),this.minusBtn.setInteractive(),this.volumeValue=this.add.text(1600,800,String(Math.ceil(100*f.value)),{fontSize:"130px",fontStyle:"bold",fontFamily:r}).setDepth(c.OBJECT_MEDIUM).setOrigin(.5,.5)}update(){this.backBtn.getIsPointerDown()?(this.scene.stop(i.SETTING),this.scene.resume(this.prevScene)):this.plusBtn.getIsPointerDown()?(f.value+=.005,f.value>=1&&(f.value=1),this.volumeValue.setText(String(Math.ceil(100*f.value))),this.music.setVolume(f.value)):this.minusBtn.getIsPointerDown()&&(f.value-=.005,f.value<=0&&(f.value=0),this.volumeValue.setText(String(Math.ceil(100*f.value))),this.music.setVolume(f.value))}}class tt{constructor(t,e,s,i,a=""){this.imageKey=t,this.name=e,this.price=s,this.state=i,this.description=a}getImageKey(){return this.imageKey}getName(){return this.name}getPrice(){return this.price}getState(){return this.state}setState(t){this.state=t}getDescription(){return this.description}}class et{constructor(t,e,s,i,a){this.scene=t,this.product=i;const n=t.add.rectangle(200,0,150,150,7374503).setOrigin(.5,.5),h=t.add.image(200,0,i.getImageKey()).setDisplaySize(75,75).setOrigin(.5,.5),o=t.add.text(500,0,i.getName(),{fontSize:"60px",fontStyle:"bold",fontFamily:r}).setStroke("#000000",5).setOrigin(.5,.5),l=t.add.text(a-500,0,String(i.getPrice()),{fontSize:"60px",fontStyle:"bold",fontFamily:r,color:"#FFF0C8"}).setStroke("#000000",5).setOrigin(.5,.5),c=t.add.text(a/2,0,i.getDescription(),{fontSize:"60px",fontFamily:r}).setStroke("#000000",5).setOrigin(.5,.5);let p;switch(i.getState()){case v.EQUIPPED:p="UNEQUIP";break;case v.NOT_EQUIPPED:p="EQUIP";break;case v.HAVE_NOT_BOUGHT_YET:p="BUY"}this.button=new d(t,a-200,0,200,80,p,{color:"#ffffff",fontSize:"40px",fontStyle:"bold",fontFamily:r}),this.button.setInteractive();const m=t.add.rectangle(0,120,a,5,16777215).setOrigin(0,0);this.container=t.add.container(e,s,[n,o,l,c,this.button.getRectangle(),this.button.getText(),this.button.getBlackRect(),m,h])}isButtonClicked(){return!!this.button.getIsPointerDown()&&(this.button.setIsPointerDown(!1),!0)}setState(t){let e;switch(this.product.setState(t),t){case v.EQUIPPED:e="UNEQUIP";break;case v.NOT_EQUIPPED:e="EQUIP";break;case v.HAVE_NOT_BOUGHT_YET:e="BUY"}this.button.getText().setText(e)}}class st extends a.Scene{constructor(){super({key:i.SHOP})}init(t){"product"==t.type?(this.keyList=D,this.nameList=w,this.priceList=b,this.descriptionList=M,this.index=0):"costume"==t.type&&(this.keyList=R,this.nameList=T,this.priceList=I,this.descriptionList=B,this.index=D.length)}create(){this.add.rectangle(0,0,3200,1600,0).setOrigin(0,0).setAlpha(.8),this.backBtn=new d(this,300,100,200,80,"BACK",{color:"#ffffff",fontSize:"40px",fontStyle:"bold",fontFamily:r}),this.backBtn.setInteractive(),this.add.text(1600,20,"SHOP",{fontSize:"110px",fontStyle:"bold",fontFamily:r}).setStroke("#000000",10).setOrigin(.5,0),this.add.rectangle(1600,200,2800,1200,2042180).setOrigin(.5,0),this.productTexture=[];let t=300;for(let e=0;e<this.keyList.length;e++){const s=new tt(this.keyList[e],this.nameList[e],this.priceList[e],C.getProductState(e+this.index),this.descriptionList[e]);this.productTexture.push(new et(this,200,t,s,2800)),t+=220}}update(t,e){this.backBtn.getIsPointerDown()&&(this.scene.stop(i.SHOP),this.scene.resume(i.MENU));for(let t=0;t<this.productTexture.length;t++)if(this.productTexture[t].isButtonClicked()){switch(C.getProductState(t+this.index)){case v.EQUIPPED:C.unequip(t+this.index);break;case v.NOT_EQUIPPED:C.equip(t+this.index);break;case v.HAVE_NOT_BOUGHT_YET:C.canBuyProduct(t+this.index)&&C.buy(t+this.index,this.priceList[t])}this.productTexture[t].setState(C.getProductState(t+this.index))}}}const it={title:"Jetpack Joyride",url:"https://github.com/leanhhuy0709/jetpack-joyride",version:"1.0",type:Phaser.AUTO,parent:"game",scene:[q,Q,j,J,m,st,Z,$],input:{keyboard:!0},physics:{default:"matter",matter:{gravity:{y:.25},debug:{showBody:!1,showStaticBody:!1,lineColor:16519680}}},width:3200,height:1600,scale:{mode:Phaser.Scale.ScaleModes.FIT,autoCenter:Phaser.Scale.Center.CENTER_BOTH,resizeInterval:1},backgroundColor:"#000000",render:{pixelArt:!0,antialias:!1}};class at extends a.Game{constructor(t){super(t)}}window.addEventListener("load",(()=>{new at(it)}))}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var r=s[t]={exports:{}};return e[t].call(r.exports,r,r.exports,i),r.exports}i.m=e,t=[],i.O=(e,s,a,r)=>{if(!s){var n=1/0;for(c=0;c<t.length;c++){for(var[s,a,r]=t[c],h=!0,o=0;o<s.length;o++)(!1&r||n>=r)&&Object.keys(i.O).every((t=>i.O[t](s[o])))?s.splice(o--,1):(h=!1,r<n&&(n=r));if(h){t.splice(c--,1);var l=a();void 0!==l&&(e=l)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[s,a,r]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={179:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,r,[n,h,o]=s,l=0;if(n.some((e=>0!==t[e]))){for(a in h)i.o(h,a)&&(i.m[a]=h[a]);if(o)var c=o(i)}for(e&&e(s);l<n.length;l++)r=n[l],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(c)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=i.O(void 0,[216],(()=>i(791)));a=i.O(a)})();